/*
  MENU

  -- Menu internal layout and styles
*/

.app [role=menubar]
    margin .5em
    white-space nowrap
    display flex
    flex-direction column


    .fa
        vertical-align middle


    .mainmenu
        flex           1
        display        flex
        flex-direction column

        .active
            flex 1

        .fa
            font-size 1.5em


    .submenu
        display flex
        border-top 1px solid #fff
        box-shadow 0 -1px 0 #ccc

        & :first-child
            flex 1


    .account
        font-weight bold

    .badge
        display none


    [role=group]
        margin-bottom 2em


    [role=menuitem]
        display block
        padding .5em

        .item-label
            margin-left 1em


    for level in (1..10)
        .lv-{level}:not(.special)
            padding-left level * 2em


    .drawer-toggle
        background transparent


    /*
    Styles for Menu drawer in compact mode

    */
    @media(min-width: 20em)
        &[aria-expanded=false]
            .item-label
            .toggle-favorites
            .new-account-action
                display none

            .mainmenu
                [role=menuitem]
                    padding-left .5

                    &:not(.special)
                        display none

            .drawer-toggle
                flex 1


#menu
    float left
    // We use a flexbox display so the #mailbox-list takes all the height left
    display flex
    flex-direction column

    height 100%
    padding 0

    background homeheadercolor

    /*
        Menu layout
    */
    #account-list
        flex 1 // Takes all height left
        overflow auto
        margin 0


        li
            position relative // for badge positionning

        ul li
            padding 0 3.5em 0 1em

    .new-account-action
    .trigger-refresh-action
        // Sets position at the bottom of the menu
        margin-top auto

    /*
        Styles
    */

    .progress-thin
        height 2px
        width 100%
        position absolute
        margin 0px
        bottom 0px
        left 0px
        .progress-bar
            background-color orange
            background-image none

    .refresh-error
        font-size 14px
        display block
        position absolute
        right 5px
        bottom 5px
        color: orange

    .refresh-error:hover
        color: red

    // Clickable menu elements
    .menu-item
        display inline-block // used for non flexed elements (within .account-list)
        width 100%
        padding .75em .25em
        margin 0
        font-size 1em
        font-family 'Maven Pro', sans-serif
        color mediumcolor
        text-align center
        vertical-align middle
        text-decoration none
        transition: background 0.3s ease

        i
        .item-label
        .badge
            vertical-align middle

        // icon
        i
            font-size 1.25em

        .item-label
            display block
            overflow hidden
            text-overflow ellipsis
            white-space nowrap

        .badge
            position absolute
            top .4em
            right .5em
            color white
            background homeheadercolor + 20%
            font-size 0.9em
            margin-left .25em
            font-family 'Source Sans Pro', sans-serif

        &:hover
        &.active
            background #363a46 + 10%
            color #fff

        &.news
            .badge
                color red
                background yellow

    &.three
        .menu-item
            padding 0.2em 0.5em
            text-align left
        i
            font-size 1em
        .item-label
            display inline
            padding-left .5em

    // Account list
    #account-list
        li
            .submenu
                display none

                background #363a46 + 5%

                // submenu icons
                //.menu-item i
                //  font-size 1.25em

            border-left .25em solid transparent

            &:hover
                border-left .25em solid #363a46 + 10%

            &.active
                border-left .25em solid mediumcolor-contrast - 30%
                .menu-item
                    color #fff

                .submenu
                    display block
            a.menu-item *
                // this is needed for dragenter and dragleave events to work
                pointer-events none

                &.refresh-error
                    pointer-events auto
            &.target
                border 1px dashed white


    // New account action button
    .new-account-action
        font-size 1em
        opacity 0.5

        &:hover
            opacity 1

    // Trigger refresh action button
    // Temporary style, because m4dz is kinda burning everything to the ground
    // at the moment :p
    .trigger-refresh-action
        width 100%
        overflow hidden
        text-overflow ellipsis
        white-space nowrap

        button
            width 100%
            text-align left
            background transparent
            border none

            &:focus
                outline none

            span + span
                margin-left 10px

