/*
 *  MENU
 *
 *  -- Menu internal layout and styles
 */

// Helpers mixins
subaction()
    order      1
    opacity    0
    margin     auto .5em auto 0
    background transparent
    border     none
    transition opacity 150ms


// App rules
.app [role=menubar]
    padding        .5em 0 0
    display        flex
    flex-direction column
    border-right   1px solid grey-03

    a
        text-decoration none

    .fa
        font-size  1.25em


    .compose-action
        flex        none
        margin      0.5em 0.875em 1.5em
        line-height 2em

        i
            vertical-align baseline

        .item-label
            padding-left .5em


    .account-details
        display inline-block
        font-size 0.875em

        .display-label
            display block
            font-size 1.25em
            color grey-08

        .display-login
            font-weight normal
            font-style italic
            line-height 1.25em
            color grey-05

    .mainmenu
        flex           1
        display        flex
        flex-direction column

        .active
            flex       1
            overflow-y auto
            overflow-x hidden

        .fa
            vertical-align middle


    .submenu
        display         flex
        justify-content space-around
        border-top      1px solid grey-03

        & > :first-child
            flex 1

        [role=menuitem].new-account-action
            padding-left 1.75em


    .account
        font-weight bold


    .account-title
    .mailbox-list li
        position    relative
        align-items center

    .badge
        order       2
        margin-left auto
        background-color grey-05


    [role=group]
        margin-bottom 2em
        margin-top 0.5em


    [role=menuitem]
        align-items center
        background transparent
        color      grey-07

        &:not(.drawer-toggle)
            display flex
            padding 0.375em 0.625em

            .item-label
                margin 0 1rem

            .account-details .item-label
                margin 0 0 0 0.75rem


    for level in (1..10)
        .lv-{level}:not(.special)
            padding-left level * 2em


    .avatar
        width          2.25em
        height         2.25em
        display        inline-block
        border-radius  50%
        line-height    2.25em
        text-align     center
        font-size      1.25em
        font-style     normal
        text-transform uppercase
        color          white
        vertical-align middle

    .account .avatar
        border-radius 10em


    .account-title
        display flex

        .account
            flex 1

        .badge
            margin-right 1em


    .menu-subaction
        color #aaa
        subaction()

        &:hover
          color basecolor


    .account-title:hover
    .mailbox-list li:hover
        .menu-subaction
            opacity 1


    .mailbox-list
        padding 0 .5em

        li
            display       flex
            padding-left 0.875em
            border-radius .25rem

            &.active
                background-color #e5e5e5

                a
                    span,
                    i
                        color #111

                    span
                        font-weight bold
                        font-size 0.875em

            a
                flex 1

                .fa
                    // horizontally centered icons
                    width      1em
                    text-align center

            .badge
                margin-right .5em

            &:hover
                a
                    color basecolor


        .toggle-favorites
            background-color transparent !important
            cursor           pointer


    /*
    Menu drawer in expanded mode

    */
    &[aria-expanded=true]
        min-width 15em


    /*
    Styles for Menu drawer in compact mode

    */
    @media(min-width: 20.0625em)
        &[aria-expanded=false]
            .item-label
            .toggle-favorites
            .new-account-action
            .help
            // badge associated to a masked mailbox
            // TODO: Improve markup or please kill me :)
            [role=menuitem]:not(.account):not(.inboxMailbox):not(.sentMailbox) ~ .badge
                display none

            .compose-action
                margin 0.5em 0.5em 1.25em

            .mainmenu
                [role=menuitem]

                    padding-left .5

                    &.account
                    &.inboxMailbox
                    &.sentMailbox
                        display flex

                    .fa
                        font-size  1.75em

                    &:not(.drawer-toggle)
                        padding 0.625em

            .mailbox-list li
                padding-left 0

            .menu-subaction
                display none !important


            .badge
                position     absolute
                top          -.15em
                right        0
                margin-right 0 !important
