.app
    display     flex
    width       100vw
    height      100vh
    align-items stretch
    overflow    hidden

    .drawer-toggle
        display none

    & > aside
        white-space nowrap

        @media(min-width: 20em)
            // elements only visible on large screens (compose button, etc)
            &[aria-expanded=false]
                .item-label
                    display none

    & > main
        position    relative
        flex        1
        display     flex
        align-items stretch

        section
            overflow-y auto


    @media(max-width: 29.9375em)
        & > aside[aria-expanded=true] + main
            transform translateX(80vw)

        & > main
            position absolute
            top      0
            left     0
            width    100%
            height   100%

        .messages-list
            .drawer-toggle
                display block


    @media(max-width: 47.9375em)
        & > main
            section
                position absolute
                top      0
                left     100%
                width    100%
                height   100%

            & :first-of-type
                left 0

                & + [aria-expanded=true]
                    transform translateX(-100%)

        // set rules for drawer
        & > aside[aria-expanded=true]
            min-width 80vw

            + main section
                width 100vw


    @media(min-width: 30em)
        & > aside
            .drawer-toggle
                display block


    @media(min-width: 48em)
        & > main
            &.full :first-of-type
                flex-basis 100% !important

                & + [aria-expanded=false]
                    flex 0


            .layout-column &
                flex-direction row

            .layout-row &
                flex-direction column

            .layout-row-reverse &
                flex-direction column-reverse

            for ratio in (20..80)
                .layout-preview-{ratio} &
                    section:nth-child(1)
                        flex 100 - ratio
                    section:nth-child(2)
                        flex ratio


    @media(min-width: 80em)
        .layout-column & :not(.full)
            section
                max-width 38em
            .conversation[aria-expanded=true]
                max-width none
