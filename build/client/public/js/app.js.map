{"version":3,"file":"public/js/app.js","sources":["app/actions/account_action_creator.coffee","app/actions/conversation_action_creator.coffee","app/actions/layout_action_creator.coffee","app/actions/message_action_creator.coffee","app/actions/search_action_creator.coffee","app/actions/settings_action_creator.coffee","app/app_dispatcher.coffee","app/components/account-config.coffee","app/components/alert.coffee","app/components/application.coffee","app/components/compose.coffee","app/components/conversation.coffee","app/components/file-picker.coffee","app/components/mailbox-list.coffee","app/components/menu.coffee","app/components/message-list.coffee","app/components/message.coffee","app/components/search-form.coffee","app/components/settings.coffee","app/components/toast.coffee","app/constants/app_constants.coffee","app/initialize.coffee","app/libs/flux/dispatcher/dispatcher.coffee","app/libs/flux/invariant.js","app/libs/flux/store/store.coffee","app/libs/panel_router.coffee","app/locales/en.coffee","app/locales/fr.coffee","app/mixins/router_mixin.coffee","app/mixins/store_watch_mixin.coffee","app/router.coffee","app/stores/account_store.coffee","app/stores/layout_store.coffee","app/stores/message_store.coffee","app/stores/search_store.coffee","app/stores/settings_store.coffee","app/stores/tasks_store.coffee","app/utils/message_utils.coffee","app/utils/plugin_utils.coffee","app/utils/socketio_utils.coffee","app/utils/translators/account_translator.coffee","app/utils/xhr_utils.coffee"],"names":[],"mappings":"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","sourcesContent":["XHRUtils = require '../utils/xhr_utils'\r\nAppDispatcher = require '../app_dispatcher'\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nAccountStore = require '../stores/account_store'\r\n\r\nmodule.exports = AccountActionCreator =\r\n\r\n    create: (inputValues) ->\r\n        AccountActionCreator._setNewAccountWaitingStatus true\r\n\r\n        XHRUtils.createAccount inputValues, (error, account) ->\r\n            # set a timeout to simulate the \"waiting\" state\r\n            AccountActionCreator._setNewAccountWaitingStatus false\r\n            console.log \"THERE\", account\r\n            if error? or not account?\r\n                AccountActionCreator._setNewAccountError error\r\n            else\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.ADD_ACCOUNT\r\n                    value: account\r\n\r\n    edit: (inputValues, accountID) ->\r\n        AccountActionCreator._setNewAccountWaitingStatus true\r\n\r\n        account = AccountStore.getByID accountID\r\n        newAccount = account.mergeDeep inputValues\r\n\r\n        XHRUtils.editAccount newAccount, (error, rawAccount) ->\r\n            AccountActionCreator._setNewAccountWaitingStatus false\r\n            if error?\r\n                AccountActionCreator._setNewAccountError error\r\n            else\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.EDIT_ACCOUNT\r\n                    value: rawAccount\r\n\r\n\r\n    remove: (accountID) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.REMOVE_ACCOUNT\r\n            value: accountID\r\n        XHRUtils.removeAccount accountID\r\n        window.router.navigate '', true\r\n\r\n    _setNewAccountWaitingStatus: (status) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.NEW_ACCOUNT_WAITING\r\n            value: status\r\n\r\n    _setNewAccountError: (errorMessage) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.NEW_ACCOUNT_ERROR\r\n            value: errorMessage\r\n\r\n    selectAccount: (accountID) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.SELECT_ACCOUNT\r\n            value: accountID\r\n\r\n    discover: (domain, callback) ->\r\n        XHRUtils.accountDiscover domain, (err, infos) ->\r\n            if not infos?\r\n                infos = []\r\n            callback err, infos\r\n","AppDispatcher  = require '../app_dispatcher'\r\n{ActionTypes}  = require '../constants/app_constants'\r\nXHRUtils       = require '../utils/xhr_utils'\r\n{MessageFlags} = require '../constants/app_constants'\r\n\r\nmodule.exports =\r\n\r\n    delete: (conversationId, callback) ->\r\n        XHRUtils.conversationDelete conversationId, (error, messages) ->\r\n            if not error?\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.RECEIVE_RAW_MESSAGES\r\n                    value: messages\r\n            if callback?\r\n                callback error\r\n\r\n    move: (conversationId, to, callback) ->\r\n        conversation =\r\n            mailboxIDs: []\r\n        observer = jsonpatch.observe conversation\r\n        conversation.mailboxIDs.push to\r\n        patches = jsonpatch.generate observer\r\n        XHRUtils.conversationPatch conversationId, patches, (error, messages) ->\r\n            if not error?\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.RECEIVE_RAW_MESSAGES\r\n                    value: messages\r\n            if callback?\r\n                callback error\r\n\r\n    seen: (conversationId, flags, callback) ->\r\n        conversation =\r\n            flags: []\r\n        observer = jsonpatch.observe conversation\r\n        conversation.flags.push(MessageFlags.SEEN)\r\n        patches = jsonpatch.generate observer\r\n        XHRUtils.conversationPatch conversationId, patches, (error, messages) ->\r\n            if not error?\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.RECEIVE_RAW_MESSAGES\r\n                    value: messages\r\n            if callback?\r\n                callback error\r\n\r\n    unseen: (conversationId, flags, callback) ->\r\n        conversation =\r\n            flags: [MessageFlags.SEEN]\r\n        observer = jsonpatch.observe conversation\r\n        conversation.flags = []\r\n        patches = jsonpatch.generate observer\r\n        XHRUtils.conversationPatch conversationId, patches, (error, messages) ->\r\n            if not error?\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.RECEIVE_RAW_MESSAGES\r\n                    value: messages\r\n            if callback?\r\n                callback error\r\n","XHRUtils = require '../utils/xhr_utils'\r\n\r\nAccountStore  = require '../stores/account_store'\r\nLayoutStore   = require '../stores/layout_store'\r\n\r\nAppDispatcher = require '../app_dispatcher'\r\n\r\n{ActionTypes, AlertLevel} = require '../constants/app_constants'\r\n\r\nAccountActionCreator = require './account_action_creator'\r\nMessageActionCreator = require './message_action_creator'\r\nSearchActionCreator = require './search_action_creator'\r\n\r\nmodule.exports = LayoutActionCreator =\r\n\r\n    showReponsiveMenu: ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.SHOW_MENU_RESPONSIVE\r\n            value: null\r\n\r\n    hideReponsiveMenu: ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.HIDE_MENU_RESPONSIVE\r\n            value: null\r\n\r\n    alert: (level, message) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.DISPLAY_ALERT\r\n            value:\r\n                level: level\r\n                message: message\r\n\r\n    alertSuccess: (message) ->\r\n        LayoutActionCreator.alert AlertLevel.SUCCESS, message\r\n    alertInfo:    (message) ->\r\n        LayoutActionCreator.alert AlertLevel.INFO, message\r\n    alertWarning: (message) ->\r\n        LayoutActionCreator.alert AlertLevel.WARNING, message\r\n    alertError:   (message) ->\r\n        LayoutActionCreator.alert AlertLevel.ERROR, message\r\n\r\n    showMessageList: (panelInfo, direction) ->\r\n        LayoutActionCreator.hideReponsiveMenu()\r\n\r\n        {accountID, mailboxID, page} = panelInfo.parameters\r\n        AccountActionCreator.selectAccount accountID\r\n\r\n        XHRUtils.fetchMessagesByFolder mailboxID, page, (err, rawMessage) ->\r\n            if err?\r\n                LayoutActionCreator.alertError err\r\n            else\r\n                MessageActionCreator.receiveRawMessages rawMessage\r\n\r\n    showConversation: (panelInfo, direction) ->\r\n        LayoutActionCreator.hideReponsiveMenu()\r\n        messageID = panelInfo.parameters.messageID\r\n        XHRUtils.fetchConversation messageID, (err, rawMessage) ->\r\n\r\n            if err?\r\n                LayoutActionCreator.alertError err\r\n            else\r\n                MessageActionCreator.receiveRawMessage rawMessage\r\n                # if there isn't a selected account (page loaded directly),\r\n                # select the message's account\r\n                selectedAccount = AccountStore.getSelected()\r\n                if  not selectedAccount? and rawMessage?.mailbox\r\n                    AccountActionCreator.selectAccount rawMessage.mailbox\r\n\r\n\r\n    showComposeNewMessage: (panelInfo, direction) ->\r\n        LayoutActionCreator.hideReponsiveMenu()\r\n\r\n        # if there isn't a selected account (page loaded directly),\r\n        # select the default account\r\n        selectedAccount = AccountStore.getSelected()\r\n        if not selectedAccount?\r\n            defaultAccount = AccountStore.getDefault()\r\n            AccountActionCreator.selectAccount defaultAccount.get 'id'\r\n\r\n    showCreateAccount: (panelInfo, direction) ->\r\n        LayoutActionCreator.hideReponsiveMenu()\r\n        AccountActionCreator.selectAccount -1\r\n\r\n    showConfigAccount: (panelInfo, direction) ->\r\n        LayoutActionCreator.hideReponsiveMenu()\r\n        AccountActionCreator.selectAccount panelInfo.parameters.accountID\r\n\r\n    showSearch: (panelInfo, direction) ->\r\n        AccountActionCreator.selectAccount -1\r\n\r\n        {query, page} = panelInfo.parameters\r\n\r\n        SearchActionCreator.setQuery query\r\n\r\n        XHRUtils.search query, page, (err, results) ->\r\n            if err?\r\n                console.log err\r\n            else\r\n                SearchActionCreator.receiveRawSearchResults results\r\n\r\n    showSettings: (panelInfo, direction) ->\r\n        LayoutActionCreator.hideReponsiveMenu()\r\n\r\n\r\n","AppDispatcher        = require '../app_dispatcher'\r\n{ActionTypes}        = require '../constants/app_constants'\r\nXHRUtils             = require '../utils/xhr_utils'\r\n\r\n\r\nmodule.exports =\r\n\r\n    receiveRawMessages: (messages) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.RECEIVE_RAW_MESSAGES\r\n            value: messages\r\n\r\n    receiveRawMessage: (message) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.RECEIVE_RAW_MESSAGE\r\n            value: message\r\n\r\n    send: (message, callback) ->\r\n        XHRUtils.messageSend message, (error, message) ->\r\n            if not error?\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.MESSAGE_SEND\r\n                    value: message\r\n            if callback?\r\n                callback error\r\n\r\n    delete: (message, account, callback) ->\r\n        # Move message to Trash folder\r\n        trash = account.get 'trashMailbox'\r\n        if not trash?\r\n            LayoutActionCreator.alertError \"#{t(\"message idelete no trash\")} #{error}\"\r\n        else\r\n            msg = message.toObject()\r\n            observer = jsonpatch.observe msg\r\n            msg.mailboxIDs = {}\r\n            msg.mailboxIDs[trash] = -1\r\n            patches = jsonpatch.generate observer\r\n            XHRUtils.messagePatch message.get('id'), patches, (error, message) ->\r\n                if not error?\r\n                    AppDispatcher.handleViewAction\r\n                        type: ActionTypes.MESSAGE_DELETE\r\n                        value: message\r\n                if callback?\r\n                    callback error\r\n\r\n    move: (message, from, to, callback) ->\r\n        msg = message.toObject()\r\n        observer = jsonpatch.observe msg\r\n        delete msg.mailboxIDs[from]\r\n        msg.mailboxIDs[to] = -1\r\n        patches = jsonpatch.generate observer\r\n        XHRUtils.messagePatch message.get('id'), patches, (error, message) ->\r\n            if not error?\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.RECEIVE_RAW_MESSAGE\r\n                    value: message\r\n            if callback?\r\n                callback error\r\n\r\n    updateFlag: (message, flags, callback) ->\r\n        msg = message.toObject()\r\n        patches = jsonpatch.compare {flags: msg.flags}, {flags}\r\n        XHRUtils.messagePatch message.get('id'), patches, (error, message) ->\r\n            if not error?\r\n                AppDispatcher.handleViewAction\r\n                    type: ActionTypes.RECEIVE_RAW_MESSAGE\r\n                    value: message\r\n            if callback?\r\n                callback error\r\n","AppDispatcher = require '../app_dispatcher'\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nmodule.exports = SearchActionCreator =\r\n\r\n    setQuery: (query) ->\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.SET_SEARCH_QUERY\r\n            value: query\r\n\r\n    receiveRawSearchResults: (results) ->\r\n\r\n        # first clear the previous results\r\n        SearchActionCreator.clearSearch false\r\n\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.RECEIVE_RAW_SEARCH_RESULTS\r\n            value: results\r\n\r\n    clearSearch: (clearQuery = true) ->\r\n        if clearQuery then SearchActionCreator.setQuery \"\"\r\n\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.CLEAR_SEARCH_RESULTS\r\n            value: null\r\n\r\n","XHRUtils = require '../utils/xhr_utils'\r\nAppDispatcher = require '../app_dispatcher'\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nSettingsStore = require '../stores/settings_store'\r\n\r\nmodule.exports = SettingsActionCreator =\r\n\r\n    edit: (inputValues) ->\r\n\r\n        AppDispatcher.handleViewAction\r\n            type: ActionTypes.SETTINGS_UPDATED\r\n            value: inputValues\r\n\r\n\r\n","Dispatcher = require './libs/flux/dispatcher/dispatcher'\r\n{PayloadSources} = require './constants/app_constants'\r\n\r\n###\r\n    Custom dispatcher class to add semantic method.\r\n###\r\nclass AppDispatcher extends Dispatcher\r\n\r\n    handleViewAction: (action) ->\r\n        payload =\r\n            source: PayloadSources.VIEW_ACTION\r\n            action: action\r\n\r\n        @dispatch payload\r\n\r\n        # create and dispatch a DOM event for plugins\r\n        domEvent = new CustomEvent PayloadSources.VIEW_ACTION, detail: action\r\n        window.dispatchEvent domEvent\r\n\r\n    handleServerAction: (action) ->\r\n        payload =\r\n            source: PayloadSources.SERVER_ACTION\r\n            action: action\r\n\r\n        @dispatch payload\r\n\r\n        # create and dispatch a DOM event for plugins\r\n        domEvent = new CustomEvent PayloadSources.SERVER_ACTION, detail: action\r\n        window.dispatchEvent domEvent\r\n\r\n\r\nmodule.exports = new AppDispatcher()\r\n","{div, h3, form, label, input, button} = React.DOM\r\nclasser = React.addons.classSet\r\n\r\nMailboxList   = require './mailbox-list'\r\nAccountStore         = require '../stores/account_store'\r\nAccountActionCreator = require '../actions/account_action_creator'\r\nStoreWatchMixin      = require '../mixins/store_watch_mixin'\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'AccountConfig'\r\n\r\n    mixins: [\r\n        StoreWatchMixin [AccountStore]\r\n        React.addons.LinkedStateMixin # two-way data binding\r\n    ]\r\n\r\n    render: ->\r\n        titleLabel = if @props.initialAccountConfig? then t \"account edit\" else t \"account new\"\r\n\r\n        if @props.isWaiting then buttonLabel = 'Saving...'\r\n        else if @props.initialAccountConfig? then buttonLabel = t \"account save\"\r\n        else buttonLabel = t \"account add\"\r\n\r\n        if @props.initialAccountConfig?\r\n            mailboxes = AccountStore.getSelectedMailboxes true\r\n\r\n        div id: 'mailbox-config',\r\n            h3 className: null, titleLabel\r\n\r\n            if @props.error\r\n                div className: 'error', @props.error\r\n\r\n            form className: 'form-horizontal',\r\n                div className: 'form-group',\r\n                    label htmlFor: 'mailbox-label', className: 'col-sm-2 col-sm-offset-2 control-label', t \"account label\"\r\n                    div className: 'col-sm-3',\r\n                        input id: 'mailbox-label', valueLink: @linkState('label'), type: 'text', className: 'form-control', placeholder: t \"account name short\"\r\n                div className: 'form-group',\r\n                    label htmlFor: 'mailbox-name', className: 'col-sm-2 col-sm-offset-2 control-label', t \"account user name\"\r\n                    div className: 'col-sm-3',\r\n                        input id: 'mailbox-name', valueLink: @linkState('name'), type: 'text', className: 'form-control', placeholder: t \"account user fullname\"\r\n                div className: 'form-group',\r\n                    label htmlFor: 'mailbox-email-address', className: 'col-sm-2 col-sm-offset-2 control-label', t \"account address\"\r\n                    div className: 'col-sm-3',\r\n                        input id: 'mailbox-email-address', valueLink: @linkState('login'), ref: 'login', onBlur: @discover, type: 'email', className: 'form-control', placeholder: t \"account address placeholder\"\r\n                div className: 'form-group',\r\n                    label htmlFor: 'mailbox-password', className: 'col-sm-2 col-sm-offset-2 control-label', t 'account password'\r\n                    div className: 'col-sm-3',\r\n                        input id: 'mailbox-password', valueLink: @linkState('password'), type: 'password', className: 'form-control'\r\n\r\n                div className: 'form-group',\r\n                    label htmlFor: 'mailbox-smtp-server', className: 'col-sm-2 col-sm-offset-2 control-label', t \"account sending server\"\r\n                    div className: 'col-sm-3',\r\n                        input id: 'mailbox-smtp-server', valueLink: @linkState('smtpServer'), type: 'text', className: 'form-control', placeholder: 'smtp.provider.tld'\r\n                    label htmlFor: 'mailbox-smtp-port', className: 'col-sm-1 control-label', 'Port'\r\n                        div className: 'col-sm-1',\r\n                            input id: 'mailbox-smtp-port', valueLink: @linkState('smtpPort'), type: 'text', className: 'form-control'\r\n\r\n                div className: 'form-group',\r\n                    label htmlFor: 'mailbox-imap-server', className: 'col-sm-2 col-sm-offset-2 control-label', t \"account receiving server\"\r\n                    div className: 'col-sm-3',\r\n                        input id: 'mailbox-imap-server', valueLink: @linkState('imapServer'), type: 'text', className: 'form-control', placeholder: 'imap.provider.tld'\r\n                    label htmlFor: 'mailbox-imap-port', className: 'col-sm-1 control-label', 'Port'\r\n                    div className: 'col-sm-1',\r\n                        input id: 'mailbox-imap-port', valueLink: @linkState('imapPort'), type: 'text', className: 'form-control'\r\n\r\n                if @props.initialAccountConfig?\r\n                    div className: 'form-group',\r\n                        label className: 'col-sm-2 col-sm-offset-2 control-label', t 'account draft mailbox'\r\n                        div className: 'col-sm-3',\r\n                            MailboxList\r\n                                allowUndefined: true\r\n                                mailboxes: mailboxes\r\n                                selectedMailbox: @state.draftMailbox\r\n                                onChange: (mailbox) => @setState 'draftMailbox': mailbox\r\n\r\n                if @props.initialAccountConfig?\r\n                    div className: 'form-group',\r\n                        label className: 'col-sm-2 col-sm-offset-2 control-label', t 'account sent mailbox'\r\n                        div className: 'col-sm-3',\r\n                            MailboxList\r\n                                allowUndefined: true\r\n                                mailboxes: mailboxes\r\n                                selectedMailbox: @state.sentMailbox\r\n                                onChange: (mailbox) => @setState 'sentMailbox': mailbox\r\n\r\n                if @props.initialAccountConfig?\r\n                    div className: 'form-group',\r\n                        label className: 'col-sm-2 col-sm-offset-2 control-label', t 'account trash mailbox'\r\n                        div className: 'col-sm-3',\r\n                            MailboxList\r\n                                allowUndefined: true\r\n                                mailboxes: mailboxes\r\n                                selectedMailbox: @state.trashMailbox\r\n                                onChange: (mailbox) => @setState 'trashMailbox': mailbox\r\n\r\n                div className: 'form-group',\r\n                    div className: 'col-sm-offset-2 col-sm-5 text-right',\r\n                        if @props.initialAccountConfig?\r\n                            button className: 'btn btn-cozy', onClick: @onRemove, t \"account remove\"\r\n                        button className: 'btn btn-cozy', onClick: @onSubmit, buttonLabel\r\n\r\n    onSubmit: (event) ->\r\n        # prevents the page from reloading\r\n        event.preventDefault()\r\n\r\n        accountValue = @state\r\n        accountValue.draftMailbox = accountValue.draftMailbox\r\n        accountValue.sentMailbox  = accountValue.sentMailbox\r\n        accountValue.trashMailbox = accountValue.trashMailbox\r\n\r\n        if @props.initialAccountConfig?\r\n            AccountActionCreator.edit accountValue, @props.initialAccountConfig.get 'id'\r\n        else\r\n            AccountActionCreator.create accountValue\r\n\r\n    onRemove: (event) ->\r\n        # prevents the page from reloading\r\n        event.preventDefault()\r\n\r\n        AccountActionCreator.remove @props.initialAccountConfig.get 'id'\r\n\r\n\r\n    discover: ->\r\n        login = @refs.login.getDOMNode().value.trim()\r\n\r\n        AccountActionCreator.discover login.split('@')[1], (err, provider) =>\r\n            if not err?\r\n                infos = {}\r\n                getInfos = (server) ->\r\n                    if server.type is 'imap' and not infos.imapServer?\r\n                        infos.imapServer = server.hostname\r\n                        infos.imapPort   = server.port\r\n                    if server.type is 'smtp' and not infos.smtpServer?\r\n                        infos.smtpServer = server.hostname\r\n                        infos.smtpPort   = server.port\r\n                getInfos server for server in provider\r\n                if not infos.imapServer?\r\n                    infos.imapServer = ''\r\n                    infos.imapPort   = ''\r\n                if not infos.smtpServer?\r\n                    infos.smtpServer = ''\r\n                    infos.smtpPort   = ''\r\n                @setState infos\r\n\r\n\r\n    componentWillReceiveProps: (props) ->\r\n        # prevents the form from changing during submission\r\n        if not props.isWaiting\r\n            # display the account values\r\n            @setState @_accountToState(props.initialAccountConfig)\r\n\r\n\r\n\r\n    getStateFromStores: ->\r\n        return @_accountToState(@props.initialAccountConfig)\r\n\r\n    _accountToState: (account)->\r\n        if account?\r\n            return {\r\n                label:        account.get 'label'\r\n                name:         account.get 'name'\r\n                login:        account.get 'login'\r\n                password:     account.get 'password'\r\n                smtpServer:   account.get 'smtpServer'\r\n                smtpPort:     account.get 'smtpPort'\r\n                imapServer:   account.get 'imapServer'\r\n                imapPort:     account.get 'imapPort'\r\n                draftMailbox: account.get 'draftMailbox'\r\n                sentMailbox:  account.get 'sentMailbox'\r\n                trashMailbox: account.get 'trashMailbox'\r\n            }\r\n        else\r\n            return {\r\n                label:        ''\r\n                name:         ''\r\n                login:        ''\r\n                password:     ''\r\n                smtpServer:   ''\r\n                smtpPort:     993\r\n                imapServer:   ''\r\n                imapPort:     465\r\n                draftMailbox: ''\r\n                sentMailbox:  ''\r\n                trashMailbox: ''\r\n            }\r\n","{div, button, span, strong} = React.DOM\r\n{AlertLevel}     = require '../constants/app_constants'\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'Alert'\r\n\r\n    render: ->\r\n\r\n        alert = @props.alert\r\n        if alert.level?\r\n            levels = {}\r\n            levels[AlertLevel.SUCCESS] = 'alert-success'\r\n            levels[AlertLevel.INFO]    = 'alert-info'\r\n            levels[AlertLevel.WARNING] = 'alert-warning'\r\n            levels[AlertLevel.ERROR]   = 'alert-danger'\r\n\r\n        div className: 'row',\r\n            if alert.level?\r\n                div className: \"alert #{levels[alert.level]} alert-dismissible\", role: \"alert\",\r\n                    button type: \"button\", className: \"close\", \"data-dismiss\": \"alert\",\r\n                        span 'aria-hidden': \"true\", \"\"\r\n                        span className: \"sr-only\", t \"app alert close\"\r\n                    strong> null, alert.message\r\n","# React components\r\n{body, div, p, form, i, input, span, a, button, strong} = React.DOM\r\nAccountConfig = require './account-config'\r\nAlert         = require './alert'\r\nToast         = require './toast'\r\nCompose       = require './compose'\r\nConversation  = require './conversation'\r\nMailboxList   = require './mailbox-list'\r\nMenu          = require './menu'\r\nMessageList   = require './message-list'\r\nSettings      = require './settings'\r\nSearchForm = require './search-form'\r\n\r\n# React addons\r\nReactCSSTransitionGroup = React.addons.CSSTransitionGroup\r\nclasser = React.addons.classSet\r\n\r\n# React Mixins\r\nRouterMixin = require '../mixins/router_mixin'\r\nStoreWatchMixin = require '../mixins/store_watch_mixin'\r\n\r\n# Flux stores\r\nAccountStore  = require '../stores/account_store'\r\nMessageStore  = require '../stores/message_store'\r\nLayoutStore   = require '../stores/layout_store'\r\nSettingsStore = require '../stores/settings_store'\r\nSearchStore   = require '../stores/search_store'\r\nTasksStore = require '../stores/tasks_store'\r\n\r\n# Flux actions\r\nLayoutActionCreator = require '../actions/layout_action_creator'\r\n\r\n###\r\n    This component is the root of the React tree.\r\n\r\n    It has two functions:\r\n        - building the layout based on the router\r\n        - listening for changes in  the model (Flux stores)\r\n          and re-render accordingly\r\n\r\n    About routing: it uses Backbone.Router as a source of truth for the layout.\r\n    (based on: https://medium.com/react-tutorials/react-backbone-router-c00be0cf1592)\r\n###\r\nmodule.exports = Application = React.createClass\r\n    displayName: 'Application'\r\n\r\n    mixins: [\r\n        StoreWatchMixin [AccountStore, MessageStore, LayoutStore, SearchStore, TasksStore]\r\n        RouterMixin\r\n    ]\r\n\r\n    render: ->\r\n        # Shortcut\r\n        layout = @props.router.current\r\n        if not layout?\r\n            return div null, t \"app loading\"\r\n\r\n        # is the layout a full-width panel or two panels sharing the width\r\n        isFullWidth = not layout.secondPanel?\r\n\r\n        firstPanelLayoutMode = if isFullWidth then 'full' else 'first'\r\n\r\n        # css classes are a bit long so we use a subfunction to get them\r\n        panelClasses = @getPanelClasses isFullWidth\r\n\r\n        showMailboxConfigButton = @state.selectedAccount? and\r\n                                  layout.firstPanel.action isnt 'account.new'\r\n        if showMailboxConfigButton\r\n            # the button toggles the mailbox config\r\n            if layout.firstPanel.action is 'account.config'\r\n                configMailboxUrl = @buildUrl\r\n                    direction: 'first'\r\n                    action: 'account.mailbox.messages'\r\n                    parameters: @state.selectedAccount.get 'id'\r\n                    fullWidth: true\r\n            else\r\n                configMailboxUrl = @buildUrl\r\n                    direction: 'first'\r\n                    action: 'account.config'\r\n                    parameters: @state.selectedAccount.get 'id'\r\n                    fullWidth: true\r\n\r\n        responsiveBackUrl = @buildUrl\r\n            firstPanel: layout.firstPanel\r\n            fullWidth: true\r\n\r\n        # classes for page-content\r\n        responsiveClasses = classer\r\n            'col-xs-12 col-md-11': true\r\n            'pushed': @state.isResponsiveMenuShown\r\n\r\n        alert = @state.alertMessage\r\n\r\n        getUrl = (mailbox) =>\r\n            @buildUrl\r\n                direction: 'first'\r\n                action: 'account.mailbox.messages'\r\n                parameters: [@state.selectedAccount?.get('id'), mailbox.get('id')]\r\n\r\n        # Actual layout\r\n        div className: 'container-fluid',\r\n            div className: 'row',\r\n\r\n                # Menu is self-managed because this part of the layout\r\n                # is always the same.\r\n                Menu\r\n                    accounts: @state.accounts\r\n                    selectedAccount: @state.selectedAccount\r\n                    isResponsiveMenuShown: @state.isResponsiveMenuShown\r\n                    layout: @props.router.current\r\n                    favoriteMailboxes: @state.favoriteMailboxes\r\n                    unreadCounts: @state.unreadCounts\r\n\r\n                div id: 'page-content', className: responsiveClasses,\r\n\r\n                    # Display feedback\r\n                    Alert { alert }\r\n\r\n                    div className: 'toasts-container',\r\n                        @state.toasts.map (toast) -> Toast toast: toast \r\n                        .toJS()\r\n\r\n                    # The quick actions bar shoud be moved in its own component\r\n                    # when its feature is implemented.\r\n                    div id: 'quick-actions', className: 'row',\r\n                        # responsive menu icon\r\n                        if layout.secondPanel\r\n                            a href: responsiveBackUrl, className: 'responsive-handler hidden-md hidden-lg',\r\n                                i className: 'fa fa-chevron-left hidden-md hidden-lg pull-left'\r\n                                t \"app back\"\r\n                        else\r\n                            a onClick: @onResponsiveMenuClick, className: 'responsive-handler hidden-md hidden-lg',\r\n                                i className: 'fa fa-bars pull-left'\r\n                                t \"app menu\"\r\n\r\n\r\n                        div className: 'col-md-6 hidden-xs hidden-sm pull-left',\r\n                            form className: 'form-inline col-md-12',\r\n                                MailboxList\r\n                                    getUrl: getUrl\r\n                                    mailboxes: @state.mailboxes\r\n                                    selectedMailbox: @state.selectedMailbox?.get('id')\r\n                                SearchForm query: @state.searchQuery\r\n\r\n                        div id: 'contextual-actions', className: 'col-md-6 hidden-xs hidden-sm pull-left text-right',\r\n                            ReactCSSTransitionGroup transitionName: 'fade',\r\n                                if showMailboxConfigButton\r\n                                    a href: configMailboxUrl, className: 'btn btn-cozy mailbox-config',\r\n                                        i className: 'fa fa-cog'\r\n\r\n                    # Two layout modes: one full-width panel or two panels\r\n                    div id: 'panels', className: 'row',\r\n                        div className: panelClasses.firstPanel, key: 'left-panel-' + layout.firstPanel.action + '-' + Object.keys(layout.firstPanel.parameters).join('-'),\r\n                            @getPanelComponent layout.firstPanel, firstPanelLayoutMode\r\n                        if not isFullWidth and layout.secondPanel?\r\n                            div className: panelClasses.secondPanel, key: 'right-panel-' + layout.secondPanel.action + '-' + Object.keys(layout.secondPanel.parameters).join('-'),\r\n                                @getPanelComponent layout.secondPanel, 'second'\r\n\r\n\r\n    # Panels CSS classes are a bit long so we get them from a this subfunction\r\n    # Also, it manages transitions between screens by adding relevant classes\r\n    getPanelClasses: (isFullWidth) ->\r\n        previous = @props.router.previous\r\n        layout   = @props.router.current\r\n        first     = layout.firstPanel\r\n        second   = layout.secondPanel\r\n\r\n        # Two cases: the layout has a full-width panel...\r\n        if isFullWidth\r\n            classes = firstPanel: 'panel col-xs-12 col-md-12'\r\n\r\n            # custom case for mailbox.config action (top right cog button)\r\n            if previous? and first.action is 'account.config'\r\n                classes.firstPanel += ' moveFromTopRightCorner'\r\n\r\n            # (default) when full-width panel is shown after a two-panels structure\r\n            else if previous? and previous.secondPanel\r\n\r\n                # if the full-width panel was on right right before, it expands\r\n                if previous.secondPanel.action is layout.firstPanel.action and\r\n                   _.difference(previous.secondPanel.parameters, layout.firstPanel.parameters).length is 0\r\n                    classes.firstPanel += ' expandFromRight'\r\n\r\n            # (default) when full-width panel is shown after a full-width panel\r\n            else if previous?\r\n                classes.firstPanel += ' moveFromLeft'\r\n\r\n\r\n        # ... or a two panels layout.\r\n        else\r\n            classes =\r\n                firstPanel: 'panel col-xs-12 col-md-6 hidden-xs hidden-sm'\r\n                secondPanel: 'panel col-xs-12 col-md-6'\r\n\r\n            # we don't animate in the first render\r\n            if previous?\r\n                wasFullWidth = not previous.secondPanel?\r\n\r\n                # transition from full-width to two-panels layout\r\n                if wasFullWidth and not isFullWidth\r\n\r\n                    # expanded second panel collapses\r\n                    if previous.firstPanel.action is second.action and\r\n                       _.difference(previous.firstPanel.parameters, second.parameters).length is 0\r\n                        classes.firstPanel += ' moveFromLeft'\r\n                        classes.secondPanel += ' slide-in-from-left'\r\n\r\n                    # (default) opens second panel sliding from the right\r\n                    else\r\n                        classes.secondPanel += ' slide-in-from-right'\r\n\r\n                # (default) opens second panel sliding from the left\r\n                else if not isFullWidth\r\n                    classes.secondPanel += ' slide-in-from-left'\r\n\r\n        return classes\r\n\r\n\r\n    # Factory of React components for panels\r\n    getPanelComponent: (panelInfo, layout) ->\r\n\r\n        # -- Generates a list of messages for a given account and mailbox\r\n        if panelInfo.action is 'account.mailbox.messages'\r\n            accountID = panelInfo.parameters.accountID\r\n            mailboxID = panelInfo.parameters.mailboxID\r\n            pageNum   = panelInfo.parameters.page ? 1\r\n            numPerPage      = @state.settings.get 'messagesPerPage'\r\n            firstOfPage     = ( pageNum - 1 ) * numPerPage\r\n            lastOfPage      = ( pageNum * numPerPage )\r\n\r\n            # gets the selected message if any\r\n            openMessage = null\r\n            direction = if layout is 'first' then 'secondPanel' else 'firstPanel'\r\n            otherPanelInfo = @props.router.current[direction]\r\n            if otherPanelInfo?.action is 'message'\r\n                openMessage = MessageStore.getByID otherPanelInfo.parameters.messageID\r\n\r\n            messagesCount = MessageStore.getMessagesCounts().get mailboxID\r\n            return MessageList\r\n                messages: MessageStore.getMessagesByMailbox mailboxID, firstOfPage, lastOfPage\r\n                messagesCount: messagesCount\r\n                accountID: accountID\r\n                mailboxID: mailboxID\r\n                layout: layout\r\n                openMessage: openMessage\r\n                messagesPerPage: numPerPage\r\n                pageNum: pageNum\r\n                emptyListMessage: t 'list empty'\r\n                counterMessage: t 'list count', messagesCount\r\n                buildPaginationUrl: (numPage) =>\r\n                    @buildUrl\r\n                        direction: 'first'\r\n                        action: 'account.mailbox.messages'\r\n                        parameters: [accountID, mailboxID, numPage]\r\n\r\n        # -- Generates a configuration window for a given account\r\n        else if panelInfo.action is 'account.config'\r\n            initialAccountConfig = @state.selectedAccount\r\n            error = AccountStore.getError()\r\n            isWaiting = AccountStore.isWaiting()\r\n            return AccountConfig {layout, error, isWaiting, initialAccountConfig}\r\n\r\n        # -- Generates a configuration window to create a new account\r\n        else if panelInfo.action is 'account.new'\r\n            error = AccountStore.getError()\r\n            isWaiting = AccountStore.isWaiting()\r\n            return AccountConfig {layout, error, isWaiting}\r\n\r\n        # -- Generates a conversation\r\n        else if panelInfo.action is 'message'\r\n            messageID = panelInfo.parameters.messageID\r\n            message = MessageStore.getByID messageID\r\n            conversation = MessageStore.getMessagesByConversation messageID\r\n            selectedAccount = @state.selectedAccount\r\n            selectedMailbox = @state.selectedMailbox\r\n            return Conversation {message, conversation, selectedAccount, layout, selectedMailbox}\r\n\r\n        # -- Generates the new message composition form\r\n        else if panelInfo.action is 'compose'\r\n            selectedAccount = @state.selectedAccount\r\n            accounts = @state.accounts\r\n            message  = null\r\n            action   = null\r\n            return Compose {selectedAccount, layout, accounts, message, action}\r\n\r\n        # -- Display the settings form\r\n        else if panelInfo.action is 'settings'\r\n            settings = @state.settings\r\n            plugins  = @state.plugins\r\n            return Settings {settings, plugins}\r\n\r\n        # -- Generates a message list based on search result\r\n        else if panelInfo.action is 'search'\r\n            accountID = null\r\n            mailboxID = null\r\n            pageNum   = panelInfo.parameters.page\r\n            numPerPage      = @state.settings.get 'messagesPerPage'\r\n            firstOfPage     = ( pageNum - 1 ) * numPerPage\r\n            lastOfPage      = ( pageNum * numPerPage )\r\n\r\n            # gets the selected message if any\r\n            openMessage = null\r\n            direction = if layout is 'first' then 'secondPanel' else 'firstPanel'\r\n            otherPanelInfo = @props.router.current[direction]\r\n            if otherPanelInfo?.action is 'message'\r\n                messageID = otherPanelInfo.parameters.messageID\r\n                openMessage = MessageStore.getByID messageID\r\n\r\n            results = SearchStore.getResults()\r\n            return MessageList\r\n                messages: results\r\n                messagesCount: results.count()\r\n                accountID: accountID\r\n                mailboxID: mailboxID\r\n                layout: layout\r\n                openMessage: openMessage\r\n                messagesPerPage: numPerPage\r\n                pageNum: pageNum\r\n                emptyListMessage: t 'list search empty', query: @state.searchQuery\r\n                counterMessage: t 'list search count', results.count()\r\n                buildPaginationUrl: (numPage) =>\r\n                    @buildUrl\r\n                        direction: 'first'\r\n                        action: 'search'\r\n                        parameters: [@state.searchQuery, numPage]\r\n\r\n        # -- Error case, shouldn't happen. Might be worth to make it pretty.\r\n        else return div null, 'Unknown component'\r\n\r\n    getStateFromStores: ->\r\n\r\n        selectedAccount = AccountStore.getSelected()\r\n        # When selecting compose in Menu, we may not have a selected account\r\n        if not selectedAccount?\r\n            selectedAccount = AccountStore.getDefault()\r\n        selectedAccountID = selectedAccount?.get('id') or null\r\n\r\n        firstPanelInfo = @props.router.current?.firstPanel\r\n        if firstPanelInfo?.action is 'account.mailbox.messages'\r\n            selectedMailboxID = firstPanelInfo.parameters.mailboxID\r\n        else\r\n            selectedMailboxID = null\r\n\r\n        return {\r\n            accounts: AccountStore.getAll()\r\n            selectedAccount: selectedAccount\r\n            isResponsiveMenuShown: LayoutStore.isMenuShown()\r\n            alertMessage: LayoutStore.getAlert()\r\n            toasts: TasksStore.getTasks()\r\n            mailboxes: AccountStore.getSelectedMailboxes true\r\n            selectedMailbox: AccountStore.getSelectedMailbox selectedMailboxID\r\n            favoriteMailboxes: AccountStore.getSelectedFavorites()\r\n            unreadCounts: MessageStore.getUnreadMessagesCounts()\r\n            searchQuery: SearchStore.getQuery()\r\n            settings: SettingsStore.get()\r\n            plugins: window.plugins\r\n        }\r\n\r\n\r\n    # Listens to router changes. Renders the component on changes.\r\n    componentWillMount: ->\r\n        # Uses `forceUpdate` with the proper scope because React doesn't allow\r\n        # to rebind its scope on the fly\r\n        @onRoute = (params) =>\r\n            {firstPanelInfo, secondPanelInfo} = params\r\n            @forceUpdate()\r\n\r\n        @props.router.on 'fluxRoute', @onRoute\r\n\r\n\r\n    # Stops listening to router changes\r\n    componentWillUnmount: ->\r\n        @props.router.off 'fluxRoute', @onRoute\r\n\r\n    # Toggle the menu in responsive mode\r\n    onResponsiveMenuClick: (event) ->\r\n        event.preventDefault()\r\n        if @state.isResponsiveMenuShown\r\n            LayoutActionCreator.hideReponsiveMenu()\r\n        else\r\n            LayoutActionCreator.showReponsiveMenu()\r\n","{div, h3, a, i, textarea, form, label, button, span, ul, li, input} = React.DOM\r\nclasser = React.addons.classSet\r\n\r\nFilePicker = require './file-picker'\r\n\r\nAccountStore  = require '../stores/account_store'\r\nSettingsStore = require '../stores/settings_store'\r\n\r\n{ComposeActions} = require '../constants/app_constants'\r\n\r\nMessageUtils = require '../utils/message_utils'\r\n\r\nLayoutActionCreator  = require '../actions/layout_action_creator'\r\nMessageActionCreator = require '../actions/message_action_creator'\r\n\r\nRouterMixin = require '../mixins/router_mixin'\r\n\r\nmodule.exports = Compose = React.createClass\r\n    displayName: 'Compose'\r\n\r\n    mixins: [\r\n        RouterMixin,\r\n        React.addons.LinkedStateMixin # two-way data binding\r\n    ]\r\n\r\n    render: ->\r\n\r\n        expandUrl = @buildUrl\r\n            direction: 'first'\r\n            action: 'compose'\r\n            fullWidth: true\r\n\r\n        collapseUrl = @buildUrl\r\n            firstPanel:\r\n                action: 'account.mailbox.messages'\r\n                parameters: @state.currentAccount?.get 'id'\r\n            secondPanel:\r\n                action: 'compose'\r\n\r\n        closeUrl = @buildClosePanelUrl @props.layout\r\n\r\n        classLabel = 'col-sm-2 col-sm-offset-0 control-label'\r\n        classInput = 'col-sm-8'\r\n\r\n        accounts = AccountStore.getAll()\r\n\r\n        onAttachmentsUpdate = (files) ->\r\n            @setState attachments: files\r\n\r\n        div id: 'email-compose',\r\n            h3 null,\r\n                a href: closeUrl, className: 'close-email hidden-xs hidden-sm',\r\n                    i className:'fa fa-times'\r\n                t 'compose'\r\n                if @props.layout isnt 'full'\r\n                    a href: expandUrl, className: 'expand hidden-xs hidden-sm',\r\n                        i className: 'fa fa-arrows-h'\r\n                else\r\n                    a href: collapseUrl, className: 'close-email pull-right',\r\n                        i className:'fa fa-compress'\r\n            form className: 'form-horizontal',\r\n                div className: 'form-group',\r\n                    label htmlFor: 'compose-from', className: classLabel, t \"compose from\"\r\n                    div className: classInput,\r\n                        button id: 'compose-from', className: 'btn btn-default dropdown-toggle', type: 'button', 'data-toggle': 'dropdown', null,\r\n                            span ref: 'account', @state.currentAccount.get 'label'\r\n                            span className: 'caret'\r\n                        ul className: 'dropdown-menu', role: 'menu',\r\n                            accounts.map (account, key) =>\r\n                                @getAccountRender account, key\r\n                            .toJS()\r\n                        div className: 'btn-toolbar compose-toggle', role: 'toolbar',\r\n                            div className: 'btn-group btn-group-sm',\r\n                                button className: 'btn btn-default', type: 'button', onClick: @onToggleCc,\r\n                                    span className: 'tool-long', t 'compose toggle cc'\r\n                            div className: 'btn-group btn-group-sm',\r\n                                button className: 'btn btn-default', type: 'button', onClick: @onToggleBcc,\r\n                                    span className: 'tool-long', t 'compose toggle bcc'\r\n                div className: 'form-group',\r\n                    label htmlFor: 'compose-to', className: classLabel, t \"compose to\"\r\n                    div className: classInput,\r\n                        input id: 'compose-to', ref: 'to', valueLink: @linkState('to'), type: 'text', className: 'form-control', placeholder: t \"compose to help\"\r\n                div className: 'form-group compose-cc',\r\n                    label htmlFor: 'compose-cc', className: classLabel, t \"compose cc\"\r\n                    div className: classInput,\r\n                        input id: 'compose-cc', ref: 'cc', valueLink: @linkState('cc'), type: 'text', className: 'form-control', placeholder: t \"compose cc help\"\r\n                div className: 'form-group compose-bcc',\r\n                    label htmlFor: 'compose-bcc', className: classLabel, t \"compose bcc\"\r\n                    div className: classInput,\r\n                        input id: 'compose-bcc', ref: 'bcc', valueLink: @linkState('bcc'), type: 'text', className: 'form-control', placeholder: t \"compose bcc help\"\r\n                div className: 'form-group',\r\n                    label htmlFor: 'compose-subject', className: classLabel, t \"compose subject\"\r\n                    div className: classInput,\r\n                        input id: 'compose-subject', ref: 'subject', valueLink: @linkState('subject'), type: 'text', className: 'form-control', placeholder: t \"compose subject help\"\r\n                div className: 'form-group',\r\n                    if @state.composeInHTML\r\n                        div className: 'rt-editor form-control', ref: 'html', contentEditable: true, dangerouslySetInnerHTML: {__html: @linkState('html').value}\r\n                    else\r\n                        textarea className: 'editor', ref: 'content', defaultValue: @linkState('body').value\r\n                div className: 'attachements',\r\n                    FilePicker {editable: true, form: false, onAttachmentsUpdate, files: @state.attachments}\r\n                div className: 'composeToolbox',\r\n                    div className: 'btn-toolbar', role: 'toolbar',\r\n                        div className: 'btn-group btn-group-sm',\r\n                            button className: 'btn btn-default', type: 'button', onClick: @onDraft,\r\n                                span className: 'fa fa-save'\r\n                                span className: 'tool-long', t 'compose action draft'\r\n                        div className: 'btn-group btn-group-lg',\r\n                            button className: 'btn btn-default', type: 'button', onClick: @onSend,\r\n                                span className: 'fa fa-send'\r\n                                span className: 'tool-long', t 'compose action send'\r\n\r\n    componentDidMount: ->\r\n        # scroll compose window into view\r\n        node = @getDOMNode()\r\n        node.scrollIntoView()\r\n        if @state.composeInHTML\r\n            # Some DOM manipulation when replying inside the message.\r\n            # When inserting a new line, we must close all blockquotes,\r\n            # insert a blank line and then open again blockquotes\r\n            jQuery('#email-compose .rt-editor').on('keypress', (e) ->\r\n                if e.keyCode is 13\r\n                    # timeout to let the editor perform its own stuff\r\n                    setTimeout ->\r\n                        matchesSelector = document.documentElement.matches or\r\n                              document.documentElement.matchesSelector or\r\n                              document.documentElement.webkitMatchesSelector or\r\n                              document.documentElement.mozMatchesSelector or\r\n                              document.documentElement.oMatchesSelector or\r\n                              document.documentElement.msMatchesSelector\r\n\r\n                        target = document.getSelection().anchorNode\r\n                        if matchesSelector? and not matchesSelector.call(target, '.rt-editor blockquote *')\r\n                            # we are not inside a blockquote, nothing to do\r\n                            return\r\n\r\n                        if target.lastChild\r\n                            target = target.lastChild.previousElementSibling\r\n                        parent = target\r\n\r\n                        # alternative 1\r\n                        # we create 2 ranges, one from the begining of message\r\n                        # to the caret position, the second from caret to the\r\n                        # end. We then create fragments from the ranges and\r\n                        # override message with first fragment, a blank line\r\n                        # and second fragment\r\n                        process = ->\r\n                            current = parent\r\n                            parent = parent?.parentNode\r\n                        process()\r\n                        process() while (parent? and\r\n                            not parent.classList.contains 'rt-editor')\r\n                        rangeBefore = document.createRange()\r\n                        rangeBefore.setEnd target, 0\r\n                        rangeBefore.setStartBefore parent.firstChild\r\n                        rangeAfter = document.createRange()\r\n                        if target.nextSibling?\r\n                            # remove the BR the <enter> key probably inserted\r\n                            rangeAfter.setStart target.nextSibling, 0\r\n                        else\r\n                            rangeAfter.setStart target, 0\r\n                        rangeAfter.setEndAfter parent.lastChild\r\n                        before = rangeBefore.cloneContents()\r\n                        after = rangeAfter.cloneContents()\r\n                        inserted = document.createElement 'p'\r\n                        inserted.innerHTML = \"<br />\"\r\n                        parent.innerHTML = \"\"\r\n                        parent.appendChild before\r\n                        parent.appendChild inserted\r\n                        parent.appendChild after\r\n\r\n                        ###\r\n                        # alternative 2\r\n                        # We move every node from the caret to the end of the\r\n                        # message to a new DOM tree, then insert a blank line\r\n                        # and the new tree\r\n                        parent = target\r\n                        p2 = null\r\n                        p3 = null\r\n                        process = ->\r\n                            p3 = p2\r\n                            current = parent\r\n                            parent = parent.parentNode\r\n                            p2 = parent.cloneNode false\r\n                            if p3?\r\n                                p2.appendChild p3\r\n                            s = current.nextSibling\r\n                            while s?\r\n                                p2.appendChild(s.cloneNode(true))\r\n                                s2 = s.nextSibling\r\n                                parent.removeChild s\r\n                                s = s2\r\n                        process()\r\n                        process() while (parent.parentNode? and\r\n                            not parent.parentNode.classList.contains 'rt-editor')\r\n                        after = p2\r\n                        inserted = document.createElement 'p'\r\n                        inserted.innerHTML = \"<br />\"\r\n                        if parent.nextSibling\r\n                            parent.parentNode.insertBefore inserted, parent.nextSibling\r\n                            parent.parentNode.insertBefore after, parent.nextSibling\r\n                        else\r\n                            parent.parentNode.appendChild inserted\r\n                            parent.parentNode.appendChild after\r\n                        ###\r\n\r\n                        inserted.focus()\r\n                        sel = window.getSelection()\r\n                        sel.collapse inserted, 0\r\n\r\n                    , 0\r\n            )\r\n\r\n\r\n    getAccountRender: (account, key) ->\r\n\r\n        isSelected = (not @state.currentAccount? and key is 0) \\\r\n                     or @state.currentAccount?.get('id') is account.get 'id'\r\n\r\n        if not isSelected\r\n            li role: 'presentation', key: key,\r\n                a role: 'menuitem', onClick: @onAccountChange, 'data-value': key, account.get 'label'\r\n\r\n    getInitialState: (forceDefault) ->\r\n        message = @props.message\r\n        state =\r\n            currentAccount: @props.selectedAccount\r\n            composeInHTML:  SettingsStore.get 'composeInHTML'\r\n            attachments: []\r\n\r\n        if message?\r\n            dateHuman = MessageUtils.formatDate message.get 'createdAt'\r\n            sender = MessageUtils.displayAddresses(message.get 'from')\r\n\r\n            text = message.get 'text'\r\n            html = message.get 'html'\r\n\r\n            if text and not html and state.composeInHTML\r\n                html = markdown.toHTML text\r\n\r\n            if html and not text and not state.composeInHTML\r\n                text = toMarkdown html\r\n\r\n        switch @props.action\r\n            when ComposeActions.REPLY\r\n                state.to = MessageUtils.displayAddresses message.getReplyToAddress(), true\r\n                state.cc = ''\r\n                state.bcc = ''\r\n                state.subject = \"#{t 'compose reply prefix'}#{message.get 'subject'}\"\r\n                state.body = t('compose reply separator', {date: dateHuman, sender: sender}) +\r\n                    MessageUtils.generateReplyText(text) + \"\\n\"\r\n                state.html = \"\"\"\r\n                    <p><br /></p>\r\n                    <p>#{t('compose reply separator', {date: dateHuman, sender: sender})}</p>\r\n                    <blockquote>#{html}</blockquote>\r\n                    \"\"\"\r\n            when ComposeActions.REPLY_ALL\r\n                state.to = MessageUtils.displayAddresses(message.getReplyToAddress(), true)\r\n                state.cc = MessageUtils.displayAddresses(Array.concat(message.get('to'), message.get('cc')), true)\r\n                state.bcc = ''\r\n                state.subject = \"#{t 'compose reply prefix'}#{message.get 'subject'}\"\r\n                state.body = t('compose reply separator', {date: dateHuman, sender: sender}) +\r\n                    MessageUtils.generateReplyText(text) + \"\\n\"\r\n                state.html = \"\"\"\r\n                    <p><br /></p>\r\n                    <p>#{t('compose reply separator', {date: dateHuman, sender: sender})}</p>\r\n                    <blockquote>#{html}</blockquote>\r\n                    \"\"\"\r\n            when ComposeActions.FORWARD\r\n                state.to = ''\r\n                state.cc = ''\r\n                state.bcc = ''\r\n                state.subject = \"#{t 'compose forward prefix'}#{message.get 'subject'}\"\r\n                state.body = t('compose forward separator', {date: dateHuman, sender: sender}) + text\r\n                state.html = \"<p>#{t('compose forward separator', {date: dateHuman, sender: sender})}</p>\" + html\r\n\r\n                # Add original message attachments\r\n                attachments = message.get 'attachments' or []\r\n                state.attachments = attachments.map(MessageUtils.convertAttachments)\r\n\r\n            when null\r\n                state.to      = ''\r\n                state.cc      = ''\r\n                state.bcc     = ''\r\n                state.subject = ''\r\n                state.body    = t 'compose default'\r\n\r\n        return state\r\n\r\n    onAccountChange: (args) ->\r\n        selected = args.target.dataset.value\r\n        if (selected isnt @state.currentAccount.get 'id')\r\n            @setState currentAccount : AccountStore.getByID selected\r\n            #this.refs.account.getDOMNode().innerHTML = @state.currentAccount.get 'label'\r\n\r\n    onDraft: (args) ->\r\n        @_doSend true\r\n\r\n    onSend: (args) ->\r\n        @_doSend false\r\n\r\n    _doSend: (isDraft) ->\r\n        message =\r\n            from        : @state.currentAccount.get 'login'\r\n            to          : this.refs.to.getDOMNode().value.trim()\r\n            cc          : this.refs.cc.getDOMNode().value.trim()\r\n            bcc         : this.refs.bcc.getDOMNode().value.trim()\r\n            subject     : this.refs.subject.getDOMNode().value.trim()\r\n            attachments : []\r\n            isDraft     : isDraft\r\n            #headers     :\r\n            #date        :\r\n            #encoding    :\r\n\r\n        attach = (file) ->\r\n            f =\r\n                filename: file.name\r\n                content: file.content\r\n            message.attachments.push f\r\n\r\n        attach file for file in @state.attachments\r\n\r\n        if @state.composeInHTML\r\n            message.html    = this.refs.html.getDOMNode().innerHTML\r\n            message.content = toMarkdown(message.html)\r\n        else\r\n            message.content = this.refs.content.getDOMNode().value.trim()\r\n\r\n        if @props.message?\r\n            msg   = @props.message\r\n            msgId = msg.get 'id'\r\n            message.inReplyTo = msgId\r\n\r\n            references = msg.references\r\n            if references?\r\n                message.references = references + msgId\r\n            else\r\n                message.references = msgId\r\n\r\n        callback = @props.callback\r\n\r\n        MessageActionCreator.send message, (error) ->\r\n            if isDraft\r\n                msgKo = t \"message action draft ko\"\r\n                msgOk = t \"message action draft ok\"\r\n            else\r\n                msgKo = t \"message action sent ko\"\r\n                msgOk = t \"message action sent ok\"\r\n            if error?\r\n                LayoutActionCreator.alertError \"#{msgKo} :  error\"\r\n            else\r\n                LayoutActionCreator.alertSuccess msgOk\r\n            if callback?\r\n                callback error\r\n\r\n    onToggleCc: (e) ->\r\n        toggle = (e) -> e.classList.toggle 'shown'\r\n        toggle e for e in @getDOMNode().querySelectorAll '.compose-cc'\r\n\r\n    onToggleBcc: (e) ->\r\n        toggle = (e) -> e.classList.toggle 'shown'\r\n        toggle e for e in @getDOMNode().querySelectorAll '.compose-bcc'\r\n","{div, ul, li, span, i, p, h3, a} = React.DOM\r\nMessage = require './message'\r\nclasser = React.addons.classSet\r\n\r\nRouterMixin = require '../mixins/router_mixin'\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'Conversation'\r\n\r\n    mixins: [RouterMixin]\r\n\r\n    render: ->\r\n        if not @props.message? or not @props.conversation\r\n            return p null, t \"app loading\"\r\n\r\n        expandUrl = @buildUrl\r\n            direction: 'first'\r\n            action: 'message'\r\n            parameters: @props.message.get 'id'\r\n            fullWidth: true\r\n\r\n        if window.router.previous?\r\n            try\r\n                selectedAccountID = @props.selectedAccount.get 'id'\r\n            catch\r\n                selectedAccountID = @props.conversation[0].mailbox\r\n        else\r\n            selectedAccountID = @props.conversation[0].mailbox\r\n\r\n        collapseUrl = @buildUrl\r\n            firstPanel:\r\n                action: 'account.mailbox.messages'\r\n                parameters: selectedAccountID\r\n            secondPanel:\r\n                action: 'message'\r\n                parameters: @props.conversation[0].get 'id'\r\n\r\n        if @props.layout is 'full'\r\n            closeUrl = @buildUrl\r\n                direction: 'first'\r\n                action: 'account.mailbox.messages'\r\n                parameters: selectedAccountID\r\n                fullWidth: true\r\n        else\r\n            closeUrl = @buildClosePanelUrl @props.layout\r\n\r\n        closeIcon = if @props.layout is 'full' then 'fa-th-list' else 'fa-times'\r\n\r\n        div className: 'conversation',\r\n\r\n            # allows multiple email open but UI is not good enough\r\n            #ul className: 'nav nav-tabs nav-justified',\r\n            #    li className: 'active',\r\n            #        a href: '#', 'Responsive Cozy Emails'\r\n            #        span className: 'close', 'x'\r\n            #    li null,\r\n            #        a href: '#', 'Responsive Cozy Emails'\r\n            #        span className: 'close', 'x'\r\n            #    li null,\r\n            #        a href: '#', 'Responsive Cozy Emails'\r\n            #        span className: 'close', 'x'\r\n            #    li null,\r\n            #        a href: '#', 'Responsive Cozy Emails'\r\n            #        span className: 'close', 'x'\r\n            #    li null,\r\n            #        a href: '#', 'Responsive Cozy Emails'\r\n            #        span className: 'close', 'x'\r\n\r\n            h3 null,\r\n                a href: closeUrl, className: 'close-conversation hidden-xs hidden-sm',\r\n                    i className:'fa ' + closeIcon\r\n                @props.message.get 'subject'\r\n                if @props.layout isnt 'full'\r\n                    a href: expandUrl, className: 'expand hidden-xs hidden-sm',\r\n                        i className: 'fa fa-arrows-h'\r\n                else\r\n                    a href: collapseUrl, className: 'close-conversation pull-right',\r\n                        i className:'fa fa-compress'\r\n\r\n            ul className: 'thread list-unstyled',\r\n                for message, key in @props.conversation\r\n                    isLast = key is @props.conversation.length - 1\r\n                    selectedAccount = @props.selectedAccount\r\n                    selectedMailbox = @props.selectedMailbox\r\n                    Message {message, key, isLast, selectedAccount, selectedMailbox}\r\n","{div, form, input, ul, li, span, i, a} = React.DOM\r\n\r\nMessageUtils = require '../utils/message_utils'\r\n\r\n###\r\n# File picker\r\n#\r\n# Available props\r\n# - editable: boolean (false)\r\n# - files: array\r\n# - form: boolean (true) embed component inside a form element\r\n# - display: function(Object) : called when a file is selected\r\n# - onUpdate: function(Array) : called when file list is updated\r\n###\r\n\r\nFilePicker = React.createClass\r\n    displayName: 'FilePicker'\r\n\r\n    propTypes:\r\n        files:    React.PropTypes.array\r\n        editable: React.PropTypes.bool\r\n        form:     React.PropTypes.bool\r\n        display:  React.PropTypes.func\r\n        onUpdate: React.PropTypes.func\r\n\r\n    getDefaultProps: ->\r\n        return {\r\n            editable: false\r\n            form: true\r\n            files: []\r\n            onUpdate: ->\r\n        }\r\n\r\n    getInitialState: ->\r\n        return {\r\n            files: @_convertFileList @props.files\r\n        }\r\n\r\n    componentWillReceiveProps: (props) ->\r\n        @setState {files: @_convertFileList props.files}\r\n\r\n    render: ->\r\n        files = @state.files.map (file) =>\r\n            doDelete = =>\r\n                updated = @state.files.filter (f) ->\r\n                    return f.name isnt file.name\r\n                @props.onUpdate updated\r\n                @setState {files: updated }\r\n            options =\r\n                key: file.name\r\n                file: file\r\n                editable: @props.editable\r\n                delete: doDelete\r\n\r\n            if @props.display?\r\n                options.display = =>\r\n                    @props.display file\r\n\r\n            FileItem options\r\n\r\n        container = if @props.form then form else div\r\n\r\n        container className: 'file-picker',\r\n            ul className: 'files list-unstyled',\r\n                files\r\n            if @props.editable\r\n                div null,\r\n                    # triggering \"click\" won't work if file input is hidden\r\n                    span className: \"file-wrapper\",\r\n                        input\r\n                            type: \"file\",\r\n                            multiple: \"multiple\",\r\n                            ref: \"file\",\r\n                            onChange: @handleFiles\r\n                    div className: \"dropzone\",\r\n                        ref: \"dropzone\",\r\n                        onDragOver: @allowDrop,\r\n                        onDrop: @handleFiles,\r\n                        onClick: @onOpenFile,\r\n                            i className: \"fa fa-paperclip\"\r\n                            span null, t \"picker drop here\"\r\n\r\n    onOpenFile: (e) ->\r\n        e.preventDefault()\r\n        jQuery(@refs.file.getDOMNode()).trigger \"click\"\r\n\r\n    allowDrop: (e) ->\r\n        e.preventDefault()\r\n\r\n    handleFiles: (e) ->\r\n        e.preventDefault()\r\n        files = e.target.files or e.dataTransfer.files\r\n        currentFiles = @state.files\r\n        parsed = 0\r\n\r\n        # convert file content to data url to store it later in local storage\r\n        handle = (file) =>\r\n            reader = new FileReader()\r\n            reader.readAsDataURL(file)\r\n            reader.onloadend = (e) =>\r\n                txt = e.target.result\r\n                file.content = txt\r\n                currentFiles.push file\r\n                parsed++\r\n                if parsed is files.length\r\n                    @props.onUpdate currentFiles\r\n                    @setState {files: currentFiles }\r\n\r\n        handle file for file in @_convertFileList files\r\n\r\n\r\n    #\r\n    # \"private\" methods\r\n    #\r\n    _convertFileList: (files) ->\r\n        convert = (file) =>\r\n            if File.prototype.isPrototypeOf(file)\r\n                @_fromDOM file\r\n            return file\r\n\r\n        Array.prototype.map.call files, convert\r\n\r\n    _fromDOM: (file) ->\r\n        return {\r\n            name:               file.name\r\n            size:               file.size\r\n            type:               file.type\r\n            originalName:       null\r\n            contentDisposition: null\r\n            contentId:          null\r\n            transferEncoding:   null\r\n            content:            null\r\n            url:                null\r\n        }\r\n\r\n\r\nmodule.exports = FilePicker\r\n\r\n###\r\n# Display a file item\r\n#\r\n# Props:\r\n#  - file\r\n#  - editable: boolean (false) allow to delete file\r\n#  - (display): function\r\n#  - (delete): function\r\n###\r\nFileItem = React.createClass\r\n    displayName: 'FileItem'\r\n\r\n    propTypes:\r\n        file: React.PropTypes.shape({\r\n            name: React.PropTypes.string\r\n            type: React.PropTypes.string\r\n            size: React.PropTypes.number\r\n        }).isRequired\r\n        editable: React.PropTypes.bool\r\n        display:  React.PropTypes.func\r\n        delete:   React.PropTypes.func\r\n\r\n    getDefaultProps: ->\r\n        return {\r\n            editable: false\r\n        }\r\n\r\n    getInitialState: ->\r\n        return {}\r\n\r\n    render: ->\r\n        file = @props.file\r\n        type = MessageUtils.getAttachmentType file.type\r\n        icons =\r\n            'archive'      : 'fa-file-archive-o'\r\n            'audio'        : 'fa-file-audio-o'\r\n            'code'         : 'fa-file-code-o'\r\n            'image'        : 'fa-file-image-o'\r\n            'pdf'          : 'fa-file-pdf-o'\r\n            'word'         : 'fa-file-word-o'\r\n            'presentation' : 'fa-file-powerpoint-o'\r\n            'spreadsheet'  : 'fa-file-excel-o'\r\n            'text'         : 'fa-file-text-o'\r\n            'video'        : 'fa-file-video-o'\r\n            'word'         : 'fa-file-word-o'\r\n        iconClass = icons[type] or 'fa-file-o'\r\n\r\n        if @props.display?\r\n            name = a\r\n                className: 'file-name',\r\n                target: '_blank',\r\n                onClick: @doDisplay,\r\n                file.name\r\n        else\r\n            name = span className: 'file-name', file.name\r\n\r\n        li className: \"file-item\", key: file.name,\r\n            i className: \"mime fa #{iconClass}\"\r\n            if @props.editable\r\n                i className: \"fa fa-times delete\", onClick: @doDelete\r\n            name\r\n            div className: 'file-detail',\r\n                span\r\n                    'data-file-url': file.url,\r\n                    \"#{(file.size / 1000).toFixed(2)}Ko\"\r\n\r\n    doDisplay: (e) ->\r\n        e.preventDefault\r\n        @props.display()\r\n\r\n    doDelete: (e) ->\r\n        e.preventDefault\r\n        @props.delete()\r\n","{div, ul, li, span, a, button} = React.DOM\r\n\r\nRouterMixin = require '../mixins/router_mixin'\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'MailboxList'\r\n\r\n    mixins: [RouterMixin]\r\n\r\n    onChange: (boxid) ->\r\n        @props.onChange? boxid\r\n\r\n    render: ->\r\n        selectedId = @props.selectedMailbox\r\n        selected = @props.mailboxes.get selectedId\r\n        if @props.mailboxes.length > 0\r\n            div className: 'dropdown pull-left',\r\n                button className: 'btn btn-default dropdown-toggle', type: 'button', 'data-toggle': 'dropdown',\r\n                    selected?.get('label') or t 'mailbox pick one'\r\n                    span className: 'caret', ''\r\n                ul className: 'dropdown-menu', role: 'menu',\r\n                    if @props.allowUndefined and selected\r\n                        li role: 'presentation', key: null, onClick: @onChange.bind(this, null),\r\n                            a role: 'menuitem', t 'mailbox pick null'\r\n\r\n                    @props.mailboxes.map (mailbox, key) =>\r\n                        if mailbox.get('id') isnt selectedId\r\n                            @getMailboxRender mailbox, key\r\n                    .toJS()\r\n        else\r\n            # no account selected\r\n            div null, \"\"\r\n\r\n\r\n    getMailboxRender: (mailbox, key) ->\r\n        url = @props.getUrl?(mailbox)\r\n        onChange = @onChange.bind(this, key)\r\n\r\n        # Mark nested levels with \"--\" because plain space just doesn't work for some reason\r\n        pusher = \"\"\r\n        pusher += \"--\" for i in [1..mailbox.get('depth')] by 1\r\n\r\n        li role: 'presentation', key: key, onClick: onChange,\r\n            if url?\r\n                a href: url, role: 'menuitem', \"#{pusher}#{mailbox.get 'label'}\"\r\n            else\r\n                a role: 'menuitem', \"#{pusher}#{mailbox.get 'label'}\"\r\n\r\n","{div, ul, li, a, span, i} = React.DOM\r\n\r\nclasser = React.addons.classSet\r\n\r\nRouterMixin = require '../mixins/router_mixin'\r\n\r\nAccountStore = require '../stores/account_store'\r\n\r\nMessageStore = require '../stores/message_store'\r\n\r\nmodule.exports = Menu = React.createClass\r\n    displayName: 'Menu'\r\n\r\n    mixins: [RouterMixin]\r\n\r\n    shouldComponentUpdate: (nextProps, nextState) ->\r\n        return not Immutable.is(nextProps.accounts, @props.accounts) or\r\n               not Immutable.is(nextProps.selectedAccount, @props.selectedAccount) or\r\n               not _.isEqual(nextProps.layout, @props.layout) or\r\n               nextProps.isResponsiveMenuShown isnt @props.isResponsiveMenuShown or\r\n               not Immutable.is(nextProps.favoriteMailboxes, @props.favoriteMailboxes) or \r\n               not Immutable.is(nextProps.unreadCounts, @props.unreadCounts)\r\n\r\n    render: ->\r\n        selectedAccountUrl = @buildUrl\r\n            direction: 'first'\r\n            action: 'account.mailbox.messages'\r\n            parameters: @props.selectedAccount?.get 'id'\r\n            fullWidth: true\r\n\r\n        # the button toggles the \"compose\" screen\r\n        if @props.layout.firstPanel.action is 'compose' or\r\n           @props.layout.secondPanel?.action is 'compose'\r\n            composeUrl = selectedAccountUrl\r\n        else\r\n            composeUrl = @buildUrl\r\n                direction: 'second'\r\n                action: 'compose'\r\n                parameters: null\r\n                fullWidth: false\r\n\r\n        # the button toggle the \"new mailbox\" screen\r\n        if @props.layout.firstPanel.action is 'account.new'\r\n            newMailboxUrl = selectedAccountUrl\r\n        else\r\n            newMailboxUrl = @buildUrl\r\n                direction: 'first'\r\n                action: 'account.new'\r\n                fullWidth: true\r\n\r\n        # the button toggles the \"settings\" screen\r\n        if @props.layout.firstPanel.action is 'settings' or\r\n           @props.layout.secondPanel?.action is 'settings'\r\n            settingsUrl = selectedAccountUrl\r\n        else\r\n            settingsUrl = @buildUrl\r\n                direction: 'first'\r\n                action: 'settings'\r\n                fullWidth: true\r\n\r\n        classes = classer\r\n            'hidden-xs hidden-sm': not @props.isResponsiveMenuShown\r\n            'col-xs-4 col-md-1': true\r\n\r\n        div id: 'menu', className: classes,\r\n            a href: composeUrl, className: 'menu-item compose-action',\r\n                i className: 'fa fa-edit'\r\n                span className: 'item-label', t 'menu compose'\r\n\r\n            ul id: 'account-list', className: 'list-unstyled',\r\n                @props.accounts.map (account, key) =>\r\n                    @getAccountRender account, key\r\n                .toJS()\r\n\r\n            a href: newMailboxUrl, className: 'menu-item new-account-action',\r\n                i className: 'fa fa-inbox'\r\n                span className: 'item-label', t 'menu account new'\r\n\r\n            a href: settingsUrl, className: 'menu-item settings-action',\r\n                i className: 'fa fa-cog'\r\n                span className: 'item-label', t 'menu settings'\r\n\r\n\r\n    # renders a single mailbox and its submenu\r\n    getAccountRender: (account, key) ->\r\n\r\n        isSelected = (not @props.selectedAccount? and key is 0) \\\r\n                     or @props.selectedAccount?.get('id') is account.get('id')\r\n\r\n        accountClasses = classer active: isSelected\r\n        accountID = account.get 'id'\r\n        defaultMailbox = AccountStore.getDefaultMailbox accountID\r\n        url = @buildUrl\r\n            direction: 'first'\r\n            action: 'account.mailbox.messages'\r\n            parameters: [accountID, defaultMailbox?.get 'id']\r\n            fullWidth: true # /!\\ Hide second panel when switching account\r\n\r\n        li className: accountClasses, key: key,\r\n            a href: url, className: 'menu-item account ' + accountClasses,\r\n                i className: 'fa fa-inbox'\r\n                span className: 'badge', @props.unreadCounts.get defaultMailbox?.get 'id'\r\n                span className: 'item-label', account.get 'label'\r\n\r\n            ul className: 'list-unstyled submenu mailbox-list',\r\n                @props.favoriteMailboxes?.map (mailbox, key) =>\r\n                    @getMailboxRender account, mailbox, key\r\n                .toJS()\r\n\r\n    getMailboxRender: (account, mailbox, key) ->\r\n        mailboxUrl = @buildUrl\r\n            direction: 'first'\r\n            action: 'account.mailbox.messages'\r\n            parameters: [account.get('id'), mailbox.get('id')]\r\n\r\n        unread = @props.unreadCounts.get mailbox.get('id')\r\n\r\n        a href: mailboxUrl, className: 'menu-item', key: key,\r\n            # Something must be rethought about the icon\r\n            i className: 'fa fa-star'\r\n            span className: 'badge', unread\r\n            span className: 'item-label', mailbox.get 'label'\r\n","{div, ul, li, a, span, i, p} = React.DOM\r\nclasser = React.addons.classSet\r\n\r\nRouterMixin  = require '../mixins/router_mixin'\r\nMessageUtils = require '../utils/message_utils'\r\n{MessageFlags} = require '../constants/app_constants'\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'MessageList'\r\n\r\n    mixins: [RouterMixin]\r\n\r\n    shouldComponentUpdate: (nextProps, nextState) ->\r\n        return not Immutable.is(nextProps.messages, @props.messages) or\r\n               not Immutable.is(nextProps.openMessage, @props.openMessage)\r\n\r\n    render: ->\r\n        curPage = parseInt @props.pageNum, 10\r\n        nbPages = Math.ceil(@props.messagesCount / @props.messagesPerPage)\r\n        div className: 'message-list',\r\n            @getPagerRender curPage, nbPages\r\n            if @props.messages.count() is 0\r\n                p null, @props.emptyListMessage\r\n            else\r\n                div null,\r\n                    p null, @props.counterMessage\r\n                    ul className: 'list-unstyled',\r\n                        @props.messages.map (message, key) =>\r\n                            # only displays initial email of a thread\r\n                            if true # @FIXME Mage conversation # message.get('inReplyTo').length is 0\r\n                                isActive = @props.openMessage? and\r\n                                           @props.openMessage.get('id') is message.get('id')\r\n                                @getMessageRender message, key, isActive\r\n                        .toJS()\r\n            @getPagerRender curPage, nbPages\r\n\r\n    getMessageRender: (message, key, isActive) ->\r\n        classes = classer\r\n            read: message.get 'isRead'\r\n            active: isActive\r\n            'unseen': message.get('flags').indexOf(MessageFlags.SEEN) is -1\r\n            'has-attachments': message.get 'hasAttachments'\r\n            'is-fav': message.get('flags').indexOf(MessageFlags.FLAGGED) isnt -1\r\n\r\n        url = @buildUrl\r\n            direction: 'second'\r\n            action: 'message'\r\n            parameters: message.get 'id'\r\n\r\n        date = MessageUtils.formatDate message.get 'createdAt'\r\n\r\n        li className: 'message ' + classes, key: key,\r\n            a href: url,\r\n                i className: 'fa fa-user'\r\n                span className: 'participants', @getParticipants message\r\n                div className: 'preview',\r\n                    span className: 'title', message.get 'subject'\r\n                    p null, message.get 'text'\r\n                span className: 'hour', date\r\n                i className: 'attach fa fa-paperclip'\r\n                i className: 'fav fa fa-star'\r\n\r\n    getPagerRender: (curPage, nbPages) ->\r\n        if nbPages < 2\r\n            return\r\n        classFirst = if curPage is 1 then 'disabled' else ''\r\n        classLast  = if curPage is nbPages then 'disabled' else ''\r\n        if nbPages < 11\r\n            minPage = 1\r\n            maxPage = nbPages\r\n        else\r\n            minPage = if curPage < 5 then 1 else curPage - 2\r\n            maxPage = minPage + 4\r\n            if maxPage > nbPages\r\n                maxPage = nbPages\r\n\r\n        urlFirst = @props.buildPaginationUrl 1\r\n        urlLast = @props.buildPaginationUrl nbPages\r\n\r\n        div className: 'pagination-box',\r\n            ul className: 'pagination',\r\n                li className: classFirst,\r\n                    a href: urlFirst, ''\r\n                if minPage > 1\r\n                    li className: 'disabled',\r\n                        a href: urlFirst, ''\r\n                for j in [minPage..maxPage] by 1\r\n                    classCurr = if j is curPage then 'current' else ''\r\n                    urlCurr = @props.buildPaginationUrl j\r\n                    li className: classCurr, key: j,\r\n                        a href: urlCurr, j\r\n                if maxPage < nbPages\r\n                    li className: 'disabled',\r\n                        a href: urlFirst, ''\r\n                li className: classLast,\r\n                    a href: urlLast, ''\r\n\r\n    getParticipants: (message) -> \"#{MessageUtils.displayAddresses(message.get 'from')}, #{MessageUtils.displayAddresses(message.get('to').concat(message.get('cc')))}\"\r\n","{div, ul, li, span, i, p, h3, a, button, pre, iframe} = React.DOM\r\nCompose      = require './compose'\r\nFilePicker   = require './file-picker'\r\nMessageUtils = require '../utils/message_utils'\r\n{ComposeActions, MessageFlags} = require '../constants/app_constants'\r\nLayoutActionCreator       = require '../actions/layout_action_creator'\r\nConversationActionCreator = require '../actions/conversation_action_creator'\r\nMessageActionCreator      = require '../actions/message_action_creator'\r\nSettingsStore = require '../stores/settings_store'\r\nRouterMixin = require '../mixins/router_mixin'\r\n\r\n# Flux stores\r\nAccountStore = require '../stores/account_store'\r\n\r\nFlagsConstants =\r\n    SEEN   : MessageFlags.SEEN\r\n    UNSEEN : \"Unseen\"\r\n    FLAGGED: MessageFlags.FLAGGED\r\n    NOFLAG : \"Noflag\"\r\n\r\nclasser = React.addons.classSet\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'Message'\r\n\r\n    mixins: [\r\n        RouterMixin\r\n    ]\r\n\r\n    getInitialState: ->\r\n        return {\r\n            active: false,\r\n            composing: false\r\n            composeAction: ''\r\n            messageDisplayHTML:   SettingsStore.get 'messageDisplayHTML'\r\n            messageDisplayImages: SettingsStore.get 'messageDisplayImages'\r\n        }\r\n\r\n    _prepareMessage: ->\r\n        message = @props.message\r\n\r\n        # display full headers\r\n        fullHeaders = []\r\n        for key, value of message.get 'headers'\r\n            if Array.isArray(value)\r\n                fullHeaders.push \"#{key}: #{value.join('\\n    ')}\"\r\n            else\r\n                fullHeaders.push \"#{key}: #{value}\"\r\n\r\n        text = message.get 'text'\r\n        html = message.get 'html'\r\n\r\n        # @TODO Do we want to convert text only messages to HTML ?\r\n        #if text and not html and @state.messageDisplayHTML\r\n        #    html = markdown.toHTML text\r\n\r\n        if html and not text and not @state.messageDisplayHTML\r\n            text = toMarkdown html\r\n\r\n        return {\r\n            attachments: message.get('attachments') or []\r\n            flags      : message.get('flags') or []\r\n            fullHeaders: fullHeaders\r\n            text       : text\r\n            html       : html\r\n            date       : MessageUtils.formatDate message.get 'createdAt'\r\n        }\r\n\r\n    componentWillMount: ->\r\n        @_markRead @props.message\r\n\r\n    componentWillReceiveProps: ->\r\n        @_markRead @props.message\r\n        @setState @getInitialState()\r\n\r\n    _markRead: (message) ->\r\n        # Mark message as seen if needed\r\n        flags = message.get('flags').slice()\r\n        if flags.indexOf(MessageFlags.SEEN) is -1\r\n            flags.push MessageFlags.SEEN\r\n            MessageActionCreator.updateFlag message, flags\r\n\r\n    render: ->\r\n\r\n        message  = @props.message\r\n        prepared = @_prepareMessage()\r\n        hasAttachments = prepared.attachments.length\r\n        if @state.messageDisplayHTML and prepared.html\r\n            parser = new DOMParser()\r\n            doc = parser.parseFromString prepared.html, \"text/html\"\r\n            if doc and not @state.messageDisplayImages\r\n                hideImage = (img) ->\r\n                    img.dataset.src = img.getAttribute 'src'\r\n                    img.setAttribute 'src', ''\r\n                images = doc.querySelectorAll 'IMG[src]'\r\n                hideImage img for img in images\r\n            else\r\n                images = []\r\n            @_htmlContent = doc.body.innerHTML\r\n            #if doc?\r\n                #htmluri = \"data:text/html;charset=utf-8;base64,#{btoa(unescape(encodeURIComponent(doc.body.innerHTML)))}\"\r\n\r\n        clickHandler = if @props.isLast then null else @onFold\r\n\r\n        classes = classer\r\n            message: true\r\n            active: @state.active\r\n        leftClass = if hasAttachments then 'col-md-8' else 'col-md-12'\r\n\r\n        # display attachment\r\n        display = (file) ->\r\n            url = \"/message/#{message.get 'id'}/attachments/#{file.name}\"\r\n            window.open url\r\n\r\n        li className: classes, key: @props.key, onClick: clickHandler, 'data-id': @props.message.get('id'),\r\n            @getToolboxRender message.get('id'), prepared\r\n            div className: 'header row',\r\n                div className: leftClass,\r\n                    i className: 'sender-avatar fa fa-user'\r\n                    div className: 'participants',\r\n                        span  className: 'sender', MessageUtils.displayAddresses(message.get('from'), true)\r\n                        span className: 'receivers', t \"mail receivers\", {dest: MessageUtils.displayAddresses(message.get('to'), true)}\r\n                        span className: 'receivers', t \"mail receivers cc\", {dest: MessageUtils.displayAddresses(message.get('cc'), true)}\r\n                    span className: 'hour', prepared.date\r\n                if hasAttachments\r\n                    div className: 'col-md-4',\r\n                        FilePicker({editable: false, files: prepared.attachments.map(MessageUtils.convertAttachments), display: display})\r\n            div className: 'full-headers',\r\n                pre null, prepared.fullHeaders.join \"\\n\"\r\n            if @state.messageDisplayHTML and prepared.html\r\n                div null,\r\n                    if images.length > 0 and not @state.messageDisplayImages\r\n                        div className: \"imagesWarning content-action\", ref: \"imagesWarning\",\r\n                            span null, t 'message images warning'\r\n                            button className: 'btn btn-default', type: \"button\", ref: 'imagesDisplay', t 'message images display'\r\n                    iframe className: 'content', ref: 'content', sandbox: 'allow-same-origin', allowTransparency: true, frameBorder: 0, ''\r\n            else\r\n                div null,\r\n                    div className: \"content-action\",\r\n                        button className: 'btn btn-default', type: \"button\", onClick: @displayHTML, t 'message html display'\r\n                    div className: 'preview',\r\n                        p null, prepared.text\r\n            div className: 'clearfix'\r\n\r\n            # Display Compose block\r\n            @getComposeRender()\r\n\r\n    getComposeRender: ->\r\n        if @state.composing\r\n            selectedAccount = @props.selectedAccount\r\n            layout          = 'second'\r\n            message         = @props.message\r\n            action          = @state.composeAction\r\n            callback        = (error) =>\r\n                if not error?\r\n                    @setState composing: false\r\n            Compose {selectedAccount, layout, message, action, callback}\r\n\r\n    getToolboxRender: (id, prepared) ->\r\n\r\n        mailboxes = AccountStore.getSelectedMailboxes true\r\n\r\n        div className: 'messageToolbox',\r\n            div className: 'btn-toolbar', role: 'toolbar',\r\n                div className: 'btn-group btn-group-sm btn-group-justified',\r\n                    div className: 'btn-group btn-group-sm',\r\n                        button className: 'btn btn-default', type: 'button', onClick: @onReply,\r\n                            span className: 'fa fa-reply'\r\n                            span className: 'tool-long', t 'mail action reply'\r\n                    div className: 'btn-group btn-group-sm',\r\n                        button className: 'btn btn-default', type: 'button', onClick: @onReplyAll,\r\n                            span className: 'fa fa-reply-all'\r\n                            span className: 'tool-long', t 'mail action reply all'\r\n                    div className: 'btn-group btn-group-sm',\r\n                        button className: 'btn btn-default', type: 'button', onClick: @onForward,\r\n                            span className: 'fa fa-mail-forward'\r\n                            span className: 'tool-long', t 'mail action forward'\r\n                    div className: 'btn-group btn-group-sm',\r\n                        button className: 'btn btn-default', type: 'button', onClick: @onDelete,\r\n                            span className: 'fa fa-trash-o'\r\n                            span className: 'tool-long', t 'mail action delete'\r\n                    div className: 'btn-group btn-group-sm',\r\n                        button className: 'btn btn-default dropdown-toggle', type: 'button', 'data-toggle': 'dropdown', t 'mail action mark',\r\n                            span className: 'caret'\r\n                        ul className: 'dropdown-menu', role: 'menu',\r\n                            if prepared.flags.indexOf(FlagsConstants.SEEN) is -1\r\n                                li null,\r\n                                    a role: 'menuitem', onClick: @onMark, 'data-value': FlagsConstants.SEEN, t 'mail mark read'\r\n                            else\r\n                                li null,\r\n                                    a role: 'menuitem', onClick: @onMark, 'data-value': FlagsConstants.UNSEEN, t 'mail mark unread'\r\n                            if prepared.flags.indexOf(FlagsConstants.FLAGGED) is -1\r\n                                li null,\r\n                                    a role: 'menuitem', onClick: @onMark, 'data-value': FlagsConstants.FLAGGED, t 'mail mark fav'\r\n                            else\r\n                                li null,\r\n                                    a role: 'menuitem', onClick: @onMark, 'data-value': FlagsConstants.NOFLAG, t 'mail mark nofav'\r\n                            #li null,\r\n                            #    a role: 'menuitem', onClick: @onMark, 'data-value': '', t 'mail mark spam'\r\n                            #li null,\r\n                            #    a role: 'menuitem', onClick: @onMark, 'data-value': '', t 'mail mark nospam'\r\n                    div className: 'btn-group btn-group-sm',\r\n                        button className: 'btn btn-default dropdown-toggle', type: 'button', 'data-toggle': 'dropdown', t 'mail action move',\r\n                            span className: 'caret'\r\n                        ul className: 'dropdown-menu', role: 'menu',\r\n                            mailboxes.map (mailbox, key) =>\r\n                                @getMailboxRender mailbox, key\r\n                            .toJS()\r\n                    div className: 'btn-group btn-group-sm',\r\n                        button className: 'btn btn-default dropdown-toggle', type: 'button', 'data-toggle': 'dropdown', t 'mail action more',\r\n                            span className: 'caret'\r\n                        ul className: 'dropdown-menu', role: 'menu',\r\n                            li role: 'presentation',\r\n                                a onClick: @onHeaders, 'data-message-id': id, t 'mail action headers'\r\n                            li role: 'presentation',\r\n                                a onClick: @onConversation, 'data-action' : 'delete', t 'mail action conversation delete'\r\n                            li role: 'presentation',\r\n                                a onClick: @onConversation, 'data-action' : 'seen',   t 'mail action conversation seen'\r\n                            li role: 'presentation',\r\n                                a onClick: @onConversation, 'data-action' : 'unseen', t 'mail action conversation unseen'\r\n                            li role: 'presentation', className: 'divider'\r\n                            li role: 'presentation', t 'mail action conversation move'\r\n                            mailboxes.map (mailbox, key) =>\r\n                                @getMailboxRender mailbox, key, true\r\n                            .toJS()\r\n                            li role: 'presentation', className: 'divider'\r\n\r\n\r\n    getMailboxRender: (mailbox, key, conversation) ->\r\n        # Don't display current mailbox\r\n        if mailbox.get('id') is @props.selectedMailbox.get('id')\r\n            return\r\n        pusher = \"\"\r\n        pusher += \"--\" for j in [1..mailbox.get('depth')] by 1\r\n        li role: 'presentation', key: key,\r\n            a role: 'menuitem', onClick: @onMove, 'data-value': key, 'data-conversation': conversation, \"#{pusher}#{mailbox.get 'label'}\"\r\n\r\n    _initFrame: ->\r\n        # - resize the frame to the height of its content\r\n        # - if images are not displayed, create the function to display them and resize the frame\r\n        if @state.messageDisplayHTML\r\n            frame = @refs.content.getDOMNode()\r\n            doc = frame.contentDocument or frame.contentWindow.document\r\n            doc.body.innerHTML = @_htmlContent\r\n            rect = doc.body.getBoundingClientRect()\r\n            frame.style.height = \"#{rect.height + 40}px\"\r\n            if not @state.messageDisplayImages and @refs.imagesDisplay?\r\n                @refs.imagesDisplay.getDOMNode().addEventListener 'click', =>\r\n                    @setState messageDisplayImages: true\r\n\r\n    componentDidMount: ->\r\n        @_initFrame()\r\n\r\n    componentDidUpdate: ->\r\n        @_initFrame()\r\n\r\n    onFold: (args) ->\r\n        @setState active: not @state.active\r\n\r\n    onReply: (args) ->\r\n        @setState composing: true\r\n        @setState composeAction: ComposeActions.REPLY\r\n\r\n    onReplyAll: (args) ->\r\n        @setState composing: true\r\n        @setState composeAction: ComposeActions.REPLY_ALL\r\n\r\n    onForward: (args) ->\r\n        @setState composing: true\r\n        @setState composeAction: ComposeActions.FORWARD\r\n\r\n    onDelete: (args) ->\r\n        if window.confirm(t 'mail confirm delete')\r\n            MessageActionCreator.delete @props.message, @props.selectedAccount, (error) =>\r\n                if error?\r\n                    LayoutActionCreator.alertError \"#{t(\"message action delete ko\")} #{error}\"\r\n                else\r\n                    LayoutActionCreator.alertSuccess t \"message action delete ok\"\r\n                    @redirect\r\n                        direction: 'first'\r\n                        action: 'account.mailbox.messages'\r\n                        parameters: [@props.selectedAccount.get('id'), @props.selectedMailbox.get('id'), 1]\r\n                        fullWidth: true\r\n\r\n    onCopy: (args) ->\r\n        LayoutActionCreator.alertWarning t \"app unimplemented\"\r\n\r\n    onMove: (args) ->\r\n        newbox = args.target.dataset.value\r\n        if args.target.dataset.conversation?\r\n            ConversationActionCreator.move @props.message.get('conversationID'), newbox, (error) =>\r\n                if error?\r\n                    LayoutActionCreator.alertError \"#{t(\"conversation move ko\")} #{error}\"\r\n                else\r\n                    LayoutActionCreator.alertSuccess t \"conversation move ok\"\r\n                    @redirect\r\n                        direction: 'first'\r\n                        action: 'account.mailbox.messages'\r\n                        parameters: [@props.selectedAccount.get('id'), @props.selectedMailbox.get('id'), 1]\r\n                        fullWidth: true\r\n        else\r\n            oldbox = @props.selectedMailbox.get 'id'\r\n            MessageActionCreator.move @props.message, oldbox, newbox, (error) =>\r\n                if error?\r\n                    LayoutActionCreator.alertError \"#{t(\"message action move ko\")} #{error}\"\r\n                else\r\n                    LayoutActionCreator.alertSuccess t \"message action move ok\"\r\n                    @redirect\r\n                        direction: 'first'\r\n                        action: 'account.mailbox.messages'\r\n                        parameters: [@props.selectedAccount.get('id'), @props.selectedMailbox.get('id'), 1]\r\n                        fullWidth: true\r\n\r\n    onMark: (args) ->\r\n        flags = @props.message.get('flags').slice()\r\n        flag = args.target.dataset.value\r\n        switch flag\r\n            when FlagsConstants.SEEN\r\n                flags.push MessageFlags.SEEN\r\n            when FlagsConstants.UNSEEN\r\n                flags = flags.filter (e) -> return e isnt FlagsConstants.SEEN\r\n            when FlagsConstants.FLAGGED\r\n                flags.push MessageFlags.FLAGGED\r\n            when FlagsConstants.NOFLAG\r\n                flags = flags.filter (e) -> return e isnt FlagsConstants.FLAGGED\r\n        MessageActionCreator.updateFlag @props.message, flags, (error) ->\r\n            if error?\r\n                LayoutActionCreator.alertError \"#{t(\"message action mark ko\")} #{error}\"\r\n            else\r\n                LayoutActionCreator.alertSuccess t \"message action mark ok\"\r\n\r\n    onConversation: (args) ->\r\n        id     = @props.message.get 'conversationID'\r\n        action = args.target.dataset.action\r\n        switch action\r\n            when 'delete'\r\n                ConversationActionCreator.delete id, (error) ->\r\n                    if error?\r\n                        LayoutActionCreator.alertError \"#{t(\"conversation delete ko\")} #{error}\"\r\n                    else\r\n                        LayoutActionCreator.alertSuccess t \"conversation delete ok\"\r\n            when 'seen'\r\n                ConversationActionCreator.seen id, (error) ->\r\n                    if error?\r\n                        LayoutActionCreator.alertError \"#{t(\"conversation seen ok \")} #{error}\"\r\n                    else\r\n                        LayoutActionCreator.alertSuccess t \"conversation seen ko \"\r\n            when 'unseen'\r\n                ConversationActionCreator.unseen id, (error) ->\r\n                    if error?\r\n                        LayoutActionCreator.alertError \"#{t(\"conversation unseen ok\")} #{error}\"\r\n                    else\r\n                        LayoutActionCreator.alertSuccess t \"conversation unseen ko\"\r\n\r\n    onHeaders: (event) ->\r\n        event.preventDefault()\r\n        messageId = event.target.dataset.messageId\r\n        document.querySelector(\".conversation [data-id='#{messageId}']\").classList.toggle('with-headers')\r\n\r\n    displayHTML: (event) ->\r\n        event.preventDefault()\r\n        @setState messageDisplayHTML: true\r\n\r\n","{div, input, span} = React.DOM\r\nclasser = React.addons.classSet\r\n\r\nSearchActionCreator = require '../actions/search_action_creator'\r\n\r\nENTER_KEY = 13\r\n\r\nRouterMixin = require '../mixins/router_mixin'\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'SearchForm'\r\n\r\n    mixins: [RouterMixin]\r\n\r\n    render: ->\r\n        div className: 'form-group pull-left',\r\n            div className: 'input-group',\r\n                input className: 'form-control', type: 'text', placeholder: t('app search'), onKeyPress: @onKeyPress, ref: 'searchInput', defaultValue: @props.query\r\n                div className: 'input-group-addon btn btn-cozy', onClick: @onSubmit,\r\n                    span className: 'fa fa-search'\r\n\r\n    onSubmit: ->\r\n        query = encodeURIComponent @refs.searchInput.getDOMNode().value.trim()\r\n\r\n        # only submit query if it's longer than 3 characters\r\n        # @TODO: validate and give feedback to the user\r\n        if query.length > 3\r\n            @redirect\r\n                direction: 'first'\r\n                action: 'search'\r\n                parameters: [query]\r\n\r\n    onKeyPress: (evt) ->\r\n        if evt.charCode is ENTER_KEY\r\n            @onSubmit()\r\n            evt.preventDefault()\r\n            return false\r\n        else\r\n            query = @refs.searchInput.getDOMNode().value\r\n            SearchActionCreator.setQuery query\r\n","{div, h3, form, label, input, button, fieldset, legend} = React.DOM\r\nclasser = React.addons.classSet\r\n\r\nSettingsActionCreator = require '../actions/settings_action_creator'\r\nSettingsStore = require '../stores/settings_store'\r\nPluginUtils   = require '../utils/plugin_utils'\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'Settings'\r\n\r\n    mixins: [\r\n        React.addons.LinkedStateMixin # two-way data binding\r\n    ]\r\n\r\n    render: ->\r\n\r\n        classLabel = 'col-sm-2 col-sm-offset-2 control-label'\r\n\r\n        div id: 'mailbox-config',\r\n            h3 className: null, t \"settings title\"\r\n\r\n            if @props.error\r\n                div className: 'error', @props.error\r\n\r\n            form className: 'form-horizontal',\r\n                div className: 'form-group',\r\n                    label htmlFor: 'settings-mpp', className: classLabel,\r\n                        t \"settings label mpp\"\r\n                    div className: 'col-sm-3',\r\n                        input\r\n                            id: 'settings-mpp',\r\n                            value: @state.settings.messagesPerPage,\r\n                            onChange: @handleChange,\r\n                            'data-target': 'messagesPerPage',\r\n                            type: 'number',\r\n                            min: 5,\r\n                            max: 100,\r\n                            step: 5,\r\n                            className: 'form-control'\r\n\r\n\r\n            @_renderOption 'composeInHTML'\r\n            @_renderOption 'messageDisplayHTML'\r\n            @_renderOption 'messageDisplayImages'\r\n\r\n            fieldset null,\r\n                legend null, t 'settings plugins'\r\n                for own pluginName, pluginConf of @state.plugins\r\n                    form className: 'form-horizontal', key: pluginName,\r\n                        div className: 'form-group',\r\n                            label className: classLabel, pluginConf.name\r\n                            div className: 'col-sm-3',\r\n                                input\r\n                                    checked: @state.plugins[pluginName].active,\r\n                                    onChange: @handleChange,\r\n                                    'data-target': 'plugin',\r\n                                    'data-plugin': pluginName,\r\n                                    type: 'checkbox',\r\n                                    className: 'form-control'\r\n\r\n    _renderOption: (option) ->\r\n        classLabel = 'col-sm-2 col-sm-offset-2 control-label'\r\n        form className: 'form-horizontal',\r\n            div className: 'form-group',\r\n                label\r\n                    htmlFor: 'settings-' + option,\r\n                    className: classLabel,\r\n                    t \"settings label \" + option\r\n                div className: 'col-sm-3',\r\n                    input\r\n                        id: 'settings-' + option,\r\n                        checked: @state.settings[option],\r\n                        onChange: @handleChange,\r\n                        'data-target': option,\r\n                        type: 'checkbox',\r\n                        className: 'form-control'\r\n\r\n    handleChange: (event) ->\r\n        target = event.target\r\n        switch target.dataset.target\r\n            when 'messagesPerPage'\r\n                settings = @state.settings\r\n                settings.messagesPerPage = target.value\r\n                @setState({settings: settings})\r\n                SettingsActionCreator.edit settings\r\n            when 'composeInHTML', 'messageDisplayHTML', 'messageDisplayImages'\r\n                settings = @state.settings\r\n                settings[target.dataset.target] = target.checked\r\n                @setState({settings: settings})\r\n                SettingsActionCreator.edit settings\r\n            when 'plugin'\r\n                if target.checked\r\n                    PluginUtils.activate target.dataset.plugin\r\n                else\r\n                    PluginUtils.deactivate target.dataset.plugin\r\n                @setState({plugins: window.plugins})\r\n\r\n    getInitialState: (forceDefault) ->\r\n        return {\r\n            settings: @props.settings.toObject()\r\n            plugins: @props.plugins\r\n        }\r\n","{div, button, span, strong} = React.DOM\r\nSocketUtils = require '../utils/socketio_utils'\r\n\r\n\r\nmodule.exports = React.createClass\r\n    displayName: 'Toast'\r\n\r\n    acknowledge: ->\r\n        SocketUtils.acknowledgeTask @props.toast.get('id')\r\n\r\n    render: ->\r\n        toast = @props.toast.toJS()\r\n        dismissible = if toast.finished then 'alert-dismissible' else ''\r\n        percent = parseInt 100 * toast.done / toast.total\r\n\r\n        div className: \"alert toast alert-info #{dismissible}\", role: \"alert\",\r\n            div className:\"progress\",\r\n                div \r\n                    className: 'progress-bar', \r\n                    role: 'progressbar', \r\n                    \"style\": width: \"#{percent}%\",\r\n                    \"aria-valuenow\": toast.done, \r\n                    \"aria-valuemin\": 0, \r\n                    \"aria-valuemax\": toast.total,\r\n                    \"#{t \"task \" + toast.code, toast} : #{percent}%\"\r\n            if toast.finished\r\n                button type: \"button\", className: \"close\", onClick: @acknowledge,\r\n                    span 'aria-hidden': \"true\", \"\"\r\n                    span className: \"sr-only\", t \"app alert close\"\r\n                    \r\n","module.exports =\r\n\r\n    ActionTypes:\r\n        # Account\r\n        'ADD_ACCOUNT'               : 'ADD_ACCOUNT'\r\n        'REMOVE_ACCOUNT'            : 'REMOVE_ACCOUNT'\r\n        'EDIT_ACCOUNT'              : 'EDIT_ACCOUNT'\r\n        'SELECT_ACCOUNT'            : 'SELECT_ACCOUNT'\r\n        'NEW_ACCOUNT_WAITING'       : 'NEW_ACCOUNT_WAITING'\r\n        'NEW_ACCOUNT_ERROR'         : 'NEW_ACCOUNT_ERROR'\r\n\r\n        # Message\r\n        'RECEIVE_RAW_MESSAGE'       : 'RECEIVE_RAW_MESSAGE'\r\n        'RECEIVE_RAW_MESSAGES'      : 'RECEIVE_RAW_MESSAGES'\r\n        'MESSAGE_SEND'              : 'MESSAGE_SEND'\r\n        'MESSAGE_DELETE'            : 'MESSAGE_DELETE'\r\n        'MESSAGE_BOXES'             : 'MESSAGE_BOXES'\r\n        'MESSAGE_FLAG'              : 'MESSAGE_FLAG'\r\n\r\n        # Search\r\n        'SET_SEARCH_QUERY'          : 'SET_SEARCH_QUERY'\r\n        'RECEIVE_RAW_SEARCH_RESULTS': 'RECEIVE_RAW_SEARCH_RESULTS'\r\n        'CLEAR_SEARCH_RESULTS'      : 'CLEAR_SEARCH_RESULTS'\r\n\r\n        # Layout\r\n        'SHOW_MENU_RESPONSIVE'      : 'SHOW_MENU_RESPONSIVE'\r\n        'HIDE_MENU_RESPONSIVE'      : 'HIDE_MENU_RESPONSIVE'\r\n        'SELECT_ACCOUNT'            : 'SELECT_ACCOUNT'\r\n        'DISPLAY_ALERT'             : 'DISPLAY_ALERT'\r\n\r\n        # Mailbox\r\n        'RECEIVE_RAW_MAILBOXES'     : 'RECEIVE_RAW_MAILBOXES'\r\n\r\n        # Settings\r\n        'SETTINGS_UPDATED'          : 'SETTINGS_UPDATED'\r\n\r\n        # Tasks\r\n        'RECEIVE_TASK_UPDATE'       : 'RECEIVE_TASK_UPDATE'\r\n        'RECEIVE_TASK_DELETE'       : 'RECEIVE_TASK_DELETE'\r\n\r\n    PayloadSources:\r\n        'VIEW_ACTION'   : 'VIEW_ACTION'\r\n        'SERVER_ACTION' : 'SERVER_ACTION'\r\n\r\n    ComposeActions:\r\n        'REPLY'         : 'REPLY'\r\n        'REPLY_ALL'     : 'REPLY_ALL'\r\n        'FORWARD'       : 'FORWARD'\r\n\r\n    AlertLevel:\r\n        'SUCCESS'      : 'SUCCESS'\r\n        'INFO'         : 'INFO'\r\n        'WARNING'      : 'WARNING'\r\n        'ERROR'        : 'ERROR'\r\n\r\n    MessageFlags:\r\n        'FLAGGED'      : '\\\\Flagged'\r\n        'SEEN'         : '\\\\Seen'\r\n        'DRAFT'        : '\\\\Draft'\r\n","# Waits for the DOM to be ready\r\nwindow.onload = ->\r\n\r\n    window.__DEV__ = window.location.hostname is 'localhost'\r\n    # use Cozy instance locale or navigator language or \"en\" by default\r\n    locale = window.locale or window.navigator.language or \"en\"\r\n    moment.locale locale\r\n    locales = {}\r\n    try\r\n        locales = require \"./locales/#{locale}\"\r\n    catch err\r\n        console.log err\r\n        locales = require \"./locales/en\"\r\n    polyglot = new Polyglot()\r\n    # we give polyglot the data\r\n    polyglot.extend locales\r\n    # handy shortcut\r\n    window.t = polyglot.t.bind polyglot\r\n\r\n    # init plugins\r\n    require(\"./utils/plugin_utils\").init()\r\n\r\n    # Flux initialization (must be called at the begining)\r\n    AccountStore  = require './stores/account_store'\r\n    LayoutStore   = require './stores/layout_store'\r\n    MessageStore  = require './stores/message_store'\r\n    SettingsStore = require './stores/settings_store'\r\n    SearchStore   = require './stores/search_store'\r\n\r\n    # Routing management\r\n    Router = require './router'\r\n    @router = new Router()\r\n    window.router = @router\r\n\r\n    # Binds the router and flux to the React application\r\n    Application = require './components/application'\r\n    application = Application router: @router\r\n    React.renderComponent application, document.body\r\n\r\n    # Starts the application by initializing the router\r\n    Backbone.history.start()\r\n\r\n    # begin realtime\r\n    require './utils/socketio_utils'\r\n\r\n    # Makes this object immuable.\r\n    Object.freeze this if typeof Object.freeze is 'function'\r\n","###\r\n\r\n    -- Coffee port of Facebook's flux dispatcher. It was in ES6 and I haven't\r\n    been successful in adding a transpiler. --\r\n\r\n    Copyright (c) 2014, Facebook, Inc.\r\n    All rights reserved.\r\n\r\n    This source code is licensed under the BSD-style license found in the\r\n    LICENSE file in the root directory of this source tree. An additional grant\r\n    of patent rights can be found in the PATENTS file in the same directory.\r\n ###\r\n\r\ninvariant = require '../invariant'\r\n\r\n_lastID = 1\r\n_prefix = 'ID_'\r\n\r\nmodule.exports = Dispatcher = class Dispatcher\r\n    constructor: ->\r\n        this._callbacks = {}\r\n        this._isPending = {}\r\n        this._isHandled = {}\r\n        this._isDispatching = false\r\n        this._pendingPayload = null\r\n\r\n    ###\r\n        Registers a callback to be invoked with every dispatched payload.\r\n        Returns a token that can be used with `waitFor()`.\r\n\r\n        @param {function} callback\r\n        @return {string}\r\n    ###\r\n    register: (callback) ->\r\n        id = _prefix + _lastID++\r\n        this._callbacks[id] = callback\r\n        return id\r\n\r\n    ###\r\n        Removes a callback based on its token.\r\n\r\n        @param {string} id\r\n    ###\r\n    unregister: (id) ->\r\n        message = 'Dispatcher.unregister(...): `%s` does not map to a ' + \\\r\n                  'registered callback.'\r\n        invariant(\r\n            this._callbacks[id],\r\n            message,\r\n            id\r\n        )\r\n        delete this._callbacks[id]\r\n\r\n    ###\r\n        Waits for the callbacks specified to be invoked before continuing\r\n        execution of the current callback. This method should only be used by a\r\n        callback in response to a dispatched payload.\r\n\r\n        @param {array<string>} ids\r\n    ###\r\n    waitFor: (ids) ->\r\n        invariant(\r\n            this._isDispatching,\r\n            'Dispatcher.waitFor(...): Must be invoked while dispatching.'\r\n        )\r\n        message = 'Dispatcher.waitFor(...): Circular dependency detected ' + \\\r\n                  'while waiting for `%s`.'\r\n        message2 = 'Dispatcher.waitFor(...): `%s` does not map to a ' + \\\r\n                   'registered callback.'\r\n        for ii in [0..ids.length - 1] by 1\r\n            id = ids[ii]\r\n            if this._isPending[id]\r\n                invariant(\r\n                    this._isHandled[id],\r\n                    message,\r\n                    id\r\n                )\r\n                continue\r\n\r\n            invariant(\r\n                this._callbacks[id],\r\n                message2,\r\n                id\r\n            )\r\n            this._invokeCallback id\r\n\r\n    ###\r\n        Dispatches a payload to all registered callbacks.\r\n\r\n        @param {object} payload\r\n    ###\r\n    dispatch: (payload) ->\r\n        message = 'Dispatch.dispatch(...): Cannot dispatch in the middle ' + \\\r\n                  'of a dispatch.'\r\n        invariant(\r\n            not this._isDispatching,\r\n            message\r\n        )\r\n        this._startDispatching(payload)\r\n        try\r\n            for id of this._callbacks\r\n                if this._isPending[id]\r\n                    continue\r\n                this._invokeCallback id\r\n        finally\r\n            this._stopDispatching()\r\n\r\n    ###\r\n        Is this Dispatcher currently dispatching.\r\n\r\n        @return {boolean}\r\n    ###\r\n    isDispatching: -> return this._isDispatching\r\n\r\n    ###\r\n        Call the callback stored with the given id. Also do some internal\r\n        bookkeeping.\r\n\r\n        @param {string} id\r\n        @internal\r\n    ###\r\n    _invokeCallback: (id) ->\r\n        this._isPending[id] = true\r\n        this._callbacks[id](this._pendingPayload)\r\n        this._isHandled[id] = true\r\n\r\n    ###\r\n        Set up bookkeeping needed when dispatching.\r\n\r\n        @param {object} payload\r\n        @internal\r\n    ###\r\n    _startDispatching: (payload) ->\r\n        for id of this._callbacks\r\n            this._isPending[id] = false\r\n            this._isHandled[id] = false\r\n\r\n        this._pendingPayload = payload\r\n        this._isDispatching = true\r\n\r\n    ###\r\n        Clear bookkeeping used for dispatching.\r\n\r\n        @internal\r\n    ###\r\n    _stopDispatching: ->\r\n        this._pendingPayload = null\r\n        this._isDispatching = false\r\n","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule invariant\n */\n\n\"use strict\";\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (__DEV__) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        'Invariant Violation: ' +\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;","AppDispatcher = require '../../../app_dispatcher'\r\n\r\n\r\nmodule.exports = class Store extends EventEmitter\r\n\r\n    uniqID: null\r\n\r\n    # this variable will be shared with all subclasses so we store the items\r\n    # by subclass we don't use `@constructor.name` because it breaks when\r\n    # mangled\r\n    _nextUniqID = 0\r\n    _handlers = {}\r\n    _addHandlers = (type, callback) ->\r\n\r\n        _handlers[@uniqID] = {} unless _handlers[@uniqID]?\r\n        _handlers[@uniqID][type] = callback\r\n\r\n    # Registers the store's callbacks to the dispatcher\r\n    _processBinding = ->\r\n        @dispatchToken = AppDispatcher.register (payload) =>\r\n            {type, value} = payload.action\r\n            if (callback = _handlers[@uniqID][type])?\r\n                callback.call @, value\r\n\r\n\r\n    constructor: ->\r\n        super()\r\n        # set a uniq ID\r\n        @uniqID = _nextUniqID++\r\n        @__bindHandlers _addHandlers.bind @\r\n        _processBinding.call @\r\n\r\n    # Must be overriden by each store\r\n    __bindHandlers: (handle) ->\r\n        if __DEV__\r\n            message = \"The store #{@constructor.name} must define a \" + \\\r\n                      \"`__bindHandlers` method\"\r\n            throw new Error message\r\n\r\n","###\r\n    Routing component. We let Backbone handling browser stuff\r\n    and we format the varying parts of the layout.\r\n\r\n    URLs are built in the following way:\r\n        - a first part that represents the first panel\r\n        - a second part that represents the second panel\r\n        - if there is just one part, it represents a full width panel\r\n\r\n    Since Backbone.Router only handles one part, routes initialization mechanism\r\n    is overriden so we can post-process the second part of the URL.\r\n\r\n    Example: a defined pattern will generates two routes.\r\n        - `mailbox/a/path/:id`\r\n        - `mailbox/a/path/:id/*secondPanel`\r\n\r\n        Each pattern is actually the pattern itself plus the pattern itself and\r\n        another pattern.\r\n###\r\n\r\nLayoutActionCreator = require '../actions/layout_action_creator'\r\n\r\nmodule.exports = class Router extends Backbone.Router\r\n\r\n    patterns: {}\r\n\r\n    # default route\r\n    routes: {}\r\n\r\n    previous: null\r\n    current: null\r\n\r\n    # we store a regexified version of each patterns\r\n    cachedPatterns: []\r\n\r\n    initialize: (options) ->\r\n\r\n        # defines the routes from the patterns\r\n        for key, route of @patterns\r\n\r\n            # caches each regex' pattern to avoid to recalculate them each time\r\n            @cachedPatterns.push\r\n                key: key\r\n                pattern: @_routeToRegExp route.pattern\r\n\r\n            # each pattern has two routes: full-width or with a second panel\r\n            @routes[route.pattern] = key\r\n            @routes[\"#{route.pattern}/*secondPanel\"] = key\r\n\r\n        # Backbone's magic\r\n        @_bindRoutes()\r\n\r\n        # Updates the LayoutStore for each matched request\r\n        @on 'route', (name, args) =>\r\n\r\n            [firstPanelInfo, secondPanelInfo] = @_processSubRouting name, args\r\n\r\n            firstAction = @fluxActionFactory firstPanelInfo\r\n            secondAction = @fluxActionFactory secondPanelInfo\r\n\r\n            @previous = @current\r\n            @current = firstPanel: firstPanelInfo, secondPanel: secondPanelInfo\r\n\r\n            if firstAction?\r\n                firstAction firstPanelInfo, 'first'\r\n\r\n            if secondAction?\r\n                secondAction secondPanelInfo, 'second'\r\n            @trigger 'fluxRoute', @current\r\n\r\n\r\n    ###\r\n        Gets the Flux action to execute given a panel info.\r\n    ###\r\n    fluxActionFactory: (panelInfo) ->\r\n\r\n        fluxAction = null\r\n        pattern = @patterns[panelInfo?.action]\r\n\r\n        if pattern?\r\n            fluxAction = LayoutActionCreator[pattern.fluxAction]\r\n\r\n            if not fluxAction?\r\n                console.warn \"`#{pattern.fluxAction}` method not found in \" + \\\r\n                             \"layout actions.\"\r\n\r\n            return fluxAction\r\n\r\n\r\n    ###\r\n        Extracts and matches the second part of the URl if it exists.\r\n    ###\r\n    _processSubRouting: (name, args) ->\r\n        # removes the last argument which is always `null`, not sure why\r\n        args.pop()\r\n\r\n        # next comes the secondPanel url if it exists\r\n        # or a firstPanel parameter if there is not secondPanel\r\n        secondPanelString = args.pop()\r\n\r\n        # if first panel number of expected params is bigger what is first\r\n        # it means there are no second panel and that what we got before was a\r\n        # parameter of the first panel\r\n        params = @patterns[name].pattern.match(/:[\\w]+/g) or []\r\n        if params.length > args.length and secondPanelString?\r\n            args.push secondPanelString\r\n            secondPanelString = null\r\n\r\n        firstPanelParameters = @_arrayToNamedParameters name, args\r\n\r\n        # checks all the routes for the second part of the URL\r\n        route = _.first _.filter @cachedPatterns, (element) ->\r\n            return element.pattern.test secondPanelString\r\n\r\n        # if a route has been found, we retrieve the params' value and format it\r\n        if route?\r\n            args = @_extractParameters route.pattern, secondPanelString\r\n            # remove the last argument which is alway `null`, not sure why\r\n            args.pop()\r\n\r\n            # normalizes the secondPanelInfo and adds default parameters if\r\n            # needed\r\n            secondPanelInfo = @_mergeDefaultParameter\r\n                action: route.key\r\n                parameters: @_arrayToNamedParameters route.key, args\r\n        else\r\n            secondPanelInfo = null\r\n\r\n        # normalizes the firstPanelInfo and adds default parameters, if needed\r\n        firstPanelInfo = @_mergeDefaultParameter\r\n            action: name\r\n            parameters: firstPanelParameters\r\n\r\n        return [firstPanelInfo, secondPanelInfo]\r\n\r\n\r\n    ###\r\n        Turns a parameters array into an object of named parameters\r\n    ###\r\n    _arrayToNamedParameters: (patternName, parametersArray) ->\r\n\r\n        namedParameters = {}\r\n        parametersName = @patterns[patternName].pattern.match(/:[\\w]+/g) or []\r\n        for paramName, index in parametersName\r\n            # Removes the initial \":\"\r\n            unPrefixedParamName = paramName.substr 1\r\n            namedParameters[unPrefixedParamName] = parametersArray[index]\r\n\r\n        return namedParameters\r\n\r\n\r\n    ###\r\n        Turns a parameters array into an object of named parameters\r\n    ###\r\n    _namedParametersToArray: (patternName, namedParameters) ->\r\n        parametersArray = []\r\n        parametersName = @patterns[patternName].pattern.match(/:[\\w]+/g) or []\r\n        for paramName, index in parametersName\r\n            # Removes the initial \":\"\r\n            unPrefixedParamName = paramName.substr 1\r\n            parametersArray.push namedParameters[paramName]\r\n\r\n        return parametersArray\r\n\r\n\r\n    ###\r\n        Builds a route from panel information.\r\n        Two modes:\r\n            - options has firstPanel and/or secondPanel attributes with the\r\n              panel(s) information.\r\n            - options has the panel information along a `direction` attribute\r\n              that can be `first` or `second`. It's the short version.\r\n    ###\r\n    buildUrl: (options) ->\r\n        # Loads the panel from the options or the current router status to keep\r\n        # track of current URLs\r\n        if options.firstPanel? or options.secondPanel?\r\n            firstPanelInfo = options.firstPanel or @current.firstPanel\r\n            secondPanelInfo = options.secondPanel or @current.secondPanel\r\n        else\r\n            # Handles short version\r\n            if options.direction?\r\n                if options.direction is 'first'\r\n                    firstPanelInfo = options\r\n                    secondPanelInfo = @current.secondPanel\r\n                else if options.direction is 'second'\r\n                    firstPanelInfo = @current.firstPanel\r\n                    secondPanelInfo = options\r\n                else\r\n                    console.warn '`direction` should be `first`, `second`.'\r\n            else\r\n                console.warn '`direction` parameter is mandatory when ' + \\\r\n                             'using short call.'\r\n\r\n        # if the `fullWidth` parameter is set, it ignores the second panel info\r\n        isFirstDirection = options.firstPanel? or options.direction is 'first'\r\n        if isFirstDirection and options.fullWidth\r\n            if options.secondPanel? and options.direction is 'second'\r\n                console.warn \"You shouldn't use the fullWidth option with \" + \\\r\n                             \"a second panel\"\r\n            secondPanelInfo = null\r\n\r\n        # Actual building\r\n        firstPart = @_getURLFromRoute firstPanelInfo\r\n        secondPart = @_getURLFromRoute secondPanelInfo\r\n\r\n        url = \"##{firstPart}\"\r\n        if secondPart? and secondPart.length > 0\r\n            url = \"#{url}/#{secondPart}\"\r\n\r\n        return url\r\n\r\n\r\n    ###\r\n        Closes a panel given a direction. If a full-width panel is closed,\r\n        the URL points to the default route.\r\n    ###\r\n    buildClosePanelUrl: (direction) ->\r\n\r\n        # If a first panel is closed, the second panel becomes full-width.\r\n        # If a full-width panel is closed, `@current.secondPanel` is null and\r\n        # the default route is loaded.\r\n        if direction is 'first' or direction is 'full'\r\n            panelInfo = _.clone @current.secondPanel\r\n        else\r\n            panelInfo = _.clone @current.firstPanel\r\n\r\n        if panelInfo?\r\n            panelInfo.direction = 'first'\r\n            panelInfo.fullWidth = true\r\n            return @buildUrl panelInfo\r\n        else\r\n            return '#' # loads the default route\r\n\r\n\r\n    # Builds the URL string from a route.\r\n    _getURLFromRoute: (panel) ->\r\n\r\n        # Clones the parameter because we are going to mutate it\r\n        panel = _.clone panel\r\n        if panel?.parameters?\r\n            # _.clone doesn't perform a deep copy\r\n            panel.parameters = _.clone panel.parameters\r\n\r\n        if panel?\r\n            pattern = @patterns[panel.action].pattern\r\n\r\n            # if the parameter is alone, we turn it into an array\r\n            if panel.parameters? and not (panel.parameters instanceof Array) \\\r\n            and not (panel.parameters instanceof Object)\r\n                panel.parameters = [panel.parameters]\r\n\r\n            # to ensures BC, if it's an array, we turn it into an object of\r\n            # named parameters\r\n            if panel.parameters? and panel.parameters instanceof Array\r\n                {action, parameters} = panel\r\n                panel.parameters = @_arrayToNamedParameters action, parameters\r\n\r\n            panel = @_mergeDefaultParameter panel\r\n\r\n            # we default to empty array if there is no parameter in the route\r\n            parametersInPattern = pattern.match(/:[\\w]+/gi) or []\r\n\r\n            # the pattern is progressively filled with values\r\n            filledPattern = pattern\r\n            if panel.parameters\r\n                for paramInPattern in parametersInPattern\r\n                    key = paramInPattern.substr 1\r\n                    paramValue = panel.parameters[key]\r\n                    filledPattern = filledPattern.replace paramInPattern, \\\r\n                                                                    paramValue\r\n\r\n            return filledPattern\r\n        else\r\n            return ''\r\n\r\n\r\n    # Merges defaut parameters into a panel info if there are missing parameters\r\n    _mergeDefaultParameter: (panelInfo) ->\r\n        panelInfo = _.clone panelInfo\r\n        parameters = _.clone panelInfo.parameters or {}\r\n        # gets default values, if there are\r\n        if (defaultParameters = @_getDefaultParameters panelInfo.action)?\r\n\r\n            # merges the parameters in the relevant place\r\n            for key, defaultParameter of defaultParameters\r\n                if not parameters[key]?\r\n                    parameters[key] = defaultParameter\r\n\r\n        panelInfo.parameters = parameters\r\n\r\n        return panelInfo\r\n","module.exports =\r\n\r\n      # Application\r\n      \"app loading\"             : \"Loading\"\r\n      \"app back\"                : \"Back\"\r\n      \"app menu\"                : \"Menu\"\r\n      \"app search\"              : \"Search\"\r\n      \"app alert close\"         : \"Close\"\r\n      \"app unimplemented\"       : \"Not implemented yet\"\r\n\r\n      # Compose window\r\n      \"compose\"                   : \"Compose new email\"\r\n      \"compose default\"           : 'Hello, how are you doing today ?'\r\n      \"compose from\"              : \"From\"\r\n      \"compose to\"                : \"To\"\r\n      \"compose to help\"           : \"Recipients list\"\r\n      \"compose cc\"                : \"Cc\"\r\n      \"compose cc help\"           : \"Copy list\"\r\n      \"compose bcc\"               : \"Bcc\"\r\n      \"compose bcc help\"          : \"Hidden copy list\"\r\n      \"compose subject\"           : \"Subject\"\r\n      \"compose subject help\"      : \"Message subject\"\r\n      \"compose reply prefix\"      : \"Re: \"\r\n      \"compose reply separator\"   : \"\\n\\nOn %{date}, %{sender} wrote \\n\"\r\n      \"compose forward prefix\"    : \"Fwd: \"\r\n      \"compose forward separator\" : \"\\n\\nOn %{date}, %{sender} wrote \\n\"\r\n      \"compose action draft\"      : \"Save draft\"\r\n      \"compose action send\"       : \"Send\"\r\n      \"compose toggle cc\"         : \"Cc\"\r\n      \"compose toggle bcc\"        : \"Bcc\"\r\n\r\n      # Menu\r\n      \"menu compose\"            : \"Compose\"\r\n      \"menu account new\"        : \"New account\"\r\n      \"menu settings\"           : \"Parameters\"\r\n\r\n      # List\r\n      \"list empty\"              : \"No email in this box.\"\r\n      \"list search empty\"       : \"No result found for the query \\\"%{query}\\\".\"\r\n      \"list count\"              : \"%{smart_count} message in this box |||| %{smart_count} messages in this box\"\r\n      \"list search count\"       : \"%{smart_count} result found. |||| %{smart_count} results found.\"\r\n\r\n      # Mail\r\n      \"mail receivers\"          : \"To %{dest}\"\r\n      \"mail receivers cc\"       : \"Cc %{dest}\"\r\n      \"mail action reply\"       : \"Reply\"\r\n      \"mail action reply all\"   : \"Reply all\"\r\n      \"mail action forward\"     : \"Forward\"\r\n      \"mail action delete\"      : \"Delete\"\r\n      \"mail action mark\"        : \"Mark as\"\r\n      \"mail action copy\"        : \"Copy\"\r\n      \"mail action move\"        : \"Move\"\r\n      \"mail action more\"        : \"More\"\r\n      \"mail action headers\"     : \"Headers\"\r\n      \"mail mark spam\"          : \"Spam\"\r\n      \"mail mark nospam\"        : \"No spam\"\r\n      \"mail mark fav\"           : \"Important\"\r\n      \"mail mark nofav\"         : \"Not important\"\r\n      \"mail mark read\"          : \"Read\"\r\n      \"mail mark unread\"        : \"Not read\"\r\n      \"mail confirm delete\"     : \"Do you really want to delete this message?\"\r\n      \"mail action conversation delete\" : \"Delete conversation\"\r\n      \"mail action conversation move\"   : \"Move conversation\"\r\n      \"mail action conversation seen\"   : \"Mark conversation as read\"\r\n      \"mail action conversation unseen\" : \"Mark conversation as not read\"\r\n\r\n      # Account\r\n      \"account new\"                 : \"New account\"\r\n      \"account edit\"                : \"Edit account\"\r\n      \"account add\"                 : \"Add\"\r\n      \"account save\"                : \"Save\"\r\n      \"account label\"               : \"Label\"\r\n      \"account name short\"          : \"A short mailbox name\"\r\n      \"account user name\"           : \"Your name\"\r\n      \"account user fullname\"       : \"Your name, as it will be displayed\"\r\n      \"account address\"             : \"Email address\"\r\n      \"account address placeholder\" : \"Your email address\"\r\n      \"account password\"            : \"Password\"\r\n      \"account sending server\"      : \"Sending server\"\r\n      \"account receiving server\"    : \"IMAP server\"\r\n      \"account remove\"              : \"Remove\"\r\n      \"account draft mailbox\"       : \"Draft box\"\r\n      \"account sent mailbox\"        : \"Sent box\"\r\n      \"account trash mailbox\"       : \"Trash\"\r\n\r\n      # Message Action\r\n      \"message action sent ok\"      : \"Message sent\"\r\n      \"message action sent ko\"      : \"Error sending message: \"\r\n      \"message action draft ok\"     : \"Message saved\"\r\n      \"message action draft ko\"     : \"Error saving message: \"\r\n      \"message action delete ok\"    : \"Message deleted\"\r\n      \"message action delete ko\"    : \"Error deleting message: \"\r\n      \"message action move ok\"      : \"Message moved\"\r\n      \"message action move ko\"      : \"Error moving message: \"\r\n      \"message action mark ok\"      : \"Message marked\"\r\n      \"message action mark ko\"      : \"Error marking message: \"\r\n      \"conversation move ok\"        : \"Conversation moved\"\r\n      \"conversation move ko\"        : \"Error moving conversation\"\r\n      \"conversation delete ok\"      : \"Conversation deleted\"\r\n      \"conversation delete ko\"      : \"Error deleting conversation\"\r\n      \"conversation seen ok\"        : \"Conversation marked as read\"\r\n      \"conversation seen ko\"        : \"Error\"\r\n      \"conversation unseen ok\"      : \"Conversation marked as unread\"\r\n      \"conversation unseen ko\"      : \"Error\"\r\n      \"message images warning\"      : \"Display of images inside message has been blocked\"\r\n      \"message images display\"      : \"Display images\"\r\n      \"message html display\"        : \"Display HTML\"\r\n      \"message delete no trash\"     : \"Please select a Trash folder\"\r\n\r\n      # Settings\r\n      \"settings title\"             : \"Settings\"\r\n      \"settings button save\"       : \"Save\"\r\n      \"settings label mpp\"         : \"Messages per page\"\r\n      \"settings plugins\"           : \"Add ons\"\r\n      \"settings label composeInHTML\"        : \"Rich message editor\"\r\n      \"settings label messageDisplayHTML\"   : \"Display message in HTML\"\r\n      \"settings label messageDisplayImages\" : \"Display images inside messages\"\r\n\r\n      # File picker\r\n      \"picker drop here\"           : \"Drop files here\"\r\n\r\n      # Mailbox List\r\n      \"mailbox pick one\"           : \"Pick one\"\r\n      \"mailbox pick null\"          : \"No box for this\"\r\n\r\n      # Tasks\r\n      \"task diff\"                  : 'Comparing %{box} of %{account}'\r\n      \"task apply-diff-fetch\"      : 'Fetching mails %{box} of %{account}'\r\n","module.exports =\r\n\r\n      # Application\r\n      \"app loading\"             : \"Chargement\"\r\n      \"app back\"                : \"Retour\"\r\n      \"app menu\"                : \"Menu\"\r\n      \"app search\"              : \"Rechercher\"\r\n      \"app alert close\"         : \"Fermer\"\r\n      \"app unimplemented\"       : \"Non implment\"\r\n\r\n      # Compose window\r\n      \"compose\"                   : \"crire un nouveau message\"\r\n      \"compose default\"           : \"Bonjour, comment a va?\"\r\n      \"compose from\"              : \"De\"\r\n      \"compose to\"                : \"\"\r\n      \"compose to help\"           : \"Liste des destinataires principaux\"\r\n      \"compose cc\"                : \"Cc\"\r\n      \"compose cc help\"           : \"Liste des destinataires en copie\"\r\n      \"compose bcc\"               : \"Cci\"\r\n      \"compose bcc help\"          : \"Liste des destinataires en copie cache\"\r\n      \"compose subject\"           : \"Objet\"\r\n      \"compose subject help\"      : \"Objet du message\"\r\n      \"compose reply prefix\"      : \"Re: \"\r\n      \"compose reply separator\"   : \"\\n\\nLe %{date}, %{sender} a crit \\n\"\r\n      \"compose forward prefix\"    : \"Fwd: \"\r\n      \"compose forward separator\" : \"\\n\\nLe %{date}, %{sender} a crit \\n\"\r\n      \"compose action draft\"      : \"Enregistrer en tant que brouillon\"\r\n      \"compose action send\"       : \"Envoyer\"\r\n      \"compose toggle cc\"         : \"Copie \"\r\n      \"compose toggle bcc\"        : \"Copie cache \"\r\n\r\n      # Menu\r\n      \"menu compose\"            : \"Nouveau\"\r\n      \"menu account new\"        : \"Ajouter un compte\"\r\n      \"menu settings\"           : \"Paramtres\"\r\n\r\n      # List\r\n      \"list empty\"              : \"Pas d'email dans cette bote..\"\r\n      \"list search empty\"       : \"Aucun rsultat trouv pour la requte \\\"%{query}\\\".\"\r\n      \"list count\"              : \"%{smart_count} message dans cette boite |||| %{smart_count} messages dans cette boite\"\r\n      \"list search count\"       : \"%{smart_count} rsultat trouv. |||| %{smart_count} rsultats trouvs.\"\r\n\r\n      # Mail\r\n      \"mail receivers\"          : \" %{dest}\"\r\n      \"mail receivers cc\"       : \"Copie %{dest}\"\r\n      \"mail action reply\"       : \"Rpondre\"\r\n      \"mail action reply all\"   : \"Rpondre  tous\"\r\n      \"mail action forward\"     : \"Transfrer\"\r\n      \"mail action delete\"      : \"Supprimer\"\r\n      \"mail action mark\"        : \"Marquer comme\"\r\n      \"mail action copy\"        : \"Copier\"\r\n      \"mail action move\"        : \"Dplacer\"\r\n      \"mail action more\"        : \"Plus\"\r\n      \"mail action headers\"     : \"Enttes\"\r\n      \"mail mark spam\"          : \"Pourriel\"\r\n      \"mail mark nospam\"        : \"Lgitime\"\r\n      \"mail mark fav\"           : \"Important\"\r\n      \"mail mark nofav\"         : \"Normal\"\r\n      \"mail mark read\"          : \"Lu\"\r\n      \"mail mark unread\"        : \"Non lu\"\r\n      \"mail confirm delete\"     : \"Voulez-vous vraiment supprimer ce message?\"\r\n      \"mail action conversation delete\" : \"Supprimer la conversation\"\r\n      \"mail action conversation move\"   : \"Dplacer la conversation\"\r\n      \"mail action conversation seen\"   : \"Marquer la conversation comme lue\"\r\n      \"mail action conversation unseen\" : \"Marquer la conversation comme non lue\"\r\n\r\n      # Account\r\n      \"account new\"                 : \"Nouveau compte\"\r\n      \"account edit\"                : \"Modifier le compte\"\r\n      \"account add\"                 : \"Crer\"\r\n      \"account save\"                : \"Enregistrer\"\r\n      \"account label\"               : \"Nom\"\r\n      \"account name short\"          : \"Nom abrg\"\r\n      \"account user name\"           : \"Votre nom\"\r\n      \"account user fullname\"       : \"Votre nom, tel qu'il sera affich\"\r\n      \"account address\"             : \"Adresse\"\r\n      \"account address placeholder\" : \"Votre adresse lectronique\"\r\n      \"account password\"            : \"Mot de passe\"\r\n      \"account sending server\"      : \"Serveur sortant\"\r\n      \"account receiving server\"    : \"Serveur IMAP\"\r\n      \"account remove\"              : \"Supprimer\"\r\n      \"account draft mailbox\"       : \"Enregistrer les brouillons dans\"\r\n      \"account sent mailbox\"        : \"Enregistrer les messages envoys dans\"\r\n      \"account trash mailbox\"       : \"Corbeille\"\r\n\r\n      # Message Action\r\n      \"message action sent ok\"      : \"Message envoy!\"\r\n      \"message action sent ko\"      : \"Une erreur est survenue: \"\r\n      \"message action draft ok\"     : \"Message sauvegard!\"\r\n      \"message action draft ko\"     : \"Une erreur est survenue: \"\r\n      \"message action delete ok\"    : \"Message supprim\"\r\n      \"message action delete ko\"    : \"Impossible de supprimer le message: \"\r\n      \"message action move ok\"      : \"Message dplac\"\r\n      \"message action move ko\"      : \"Le dplacement a chou\"\r\n      \"message action mark ok\"      : \"Ok\"\r\n      \"message action mark ko\"      : \"L'opration a chou\"\r\n      \"conversation move ok\"        : \"Conversation dplace\"\r\n      \"conversation move ko\"        : \"L'opration a chou\"\r\n      \"conversation delete ok\"      : \"Conversation supprime\"\r\n      \"conversation delete ko\"      : \"L'opration a chou\"\r\n      \"conversation seen ok\"        : \"Ok\"\r\n      \"conversation seen ko\"        : \"L'opration a chou\"\r\n      \"conversation unseen ok\"      : \"Ok\"\r\n      \"conversation unseen ko\"      : \"L'opration a chou\"\r\n      \"message images warning\"      : \"L'affichage des images du message a t bloqu\"\r\n      \"message images display\"      : \"Afficher les images\"\r\n      \"message html display\"        : \"Afficher en HTML\"\r\n      \"message delete no trash\"     : \"Choisissez d'abord un dossier Corbeille\"\r\n\r\n      # Settings\r\n      \"settings title\"             : \"Paramtres\"\r\n      \"settings button save\"       : \"Enregistrer\"\r\n      \"settings label mpp\"         : \"Nombre de messages par page\"\r\n      \"settings plugins\"           : \"Modules complmentaires\"\r\n      \"settings label composeInHTML\"        : \"diteur riche\"\r\n      \"settings label messageDisplayHTML\"   : \"Afficher les messages en HTML\"\r\n      \"settings label messageDisplayImages\" : \"Afficher les images\"\r\n\r\n      # File picker\r\n      \"picker drop here\"           : \"Dposer les fichiers ici\"\r\n\r\n      # Mailbox List\r\n      \"mailbox pick one\"           : \"Choisissez une boite\"\r\n      \"mailbox pick null\"          : \"Pas de boite pour a\"\r\n\r\n      # Tasks\r\n      \"task diff\"                  : 'Comparaison %{box} of %{account}'\r\n      \"task apply-diff-fetch\"      : 'Tlchargement emails %{box} of %{account}'\r\n","###\r\n    Router mixin.\r\n    Aliases `buildUrl` and `buildClosePanelUrl`\r\n###\r\n\r\nrouter = window.router\r\n\r\nmodule.exports =\r\n\r\n    buildUrl: (options) ->\r\n        router.buildUrl.call router, options\r\n\r\n    buildClosePanelUrl: (direction) ->\r\n        router.buildClosePanelUrl.call router, direction\r\n\r\n    # Builds the URL (based on options) and redirect to it.\r\n    # If `options` is a string, it will be considered as the target URL.\r\n    redirect: (options) ->\r\n        url = if typeof options is \"string\" then options else @buildUrl options\r\n        router.navigate url, true\r\n\r\n\r\n","module.exports = StoreWatchMixin = (stores) ->\r\n\r\n    return {\r\n        componentDidMount: ->\r\n            stores.forEach (store) => store.on 'change', @_setStateFromStores\r\n\r\n        componentWillUnmount: ->\r\n            stores.forEach (store) =>\r\n                store.removeListener 'change', @_setStateFromStores\r\n\r\n        getInitialState: -> return @getStateFromStores()\r\n\r\n        _setStateFromStores: -> @setState @getStateFromStores()\r\n    }","PanelRouter = require './libs/panel_router'\r\n\r\nAccountStore = require './stores/account_store'\r\n\r\nmodule.exports = class Router extends PanelRouter\r\n\r\n    patterns:\r\n        'account.config':\r\n            pattern: 'account/:accountID/config'\r\n            fluxAction: 'showConfigAccount'\r\n        'account.new':\r\n            pattern: 'account/new'\r\n            fluxAction: 'showCreateAccount'\r\n        'account.mailbox.messages':\r\n            pattern: 'account/:accountID/mailbox/:mailboxID/page/:page'\r\n            fluxAction: 'showMessageList'\r\n\r\n        'search':\r\n            pattern: 'search/:query/page/:page'\r\n            fluxAction: 'showSearch'\r\n\r\n        'message':\r\n            pattern: 'message/:messageID'\r\n            fluxAction: 'showConversation'\r\n        'compose':\r\n            pattern: 'compose'\r\n            fluxAction: 'showComposeNewMessage'\r\n\r\n        'settings':\r\n            pattern: 'settings'\r\n            fluxAction: 'showSettings'\r\n\r\n    # default route\r\n    routes: '': 'account.mailbox.messages'\r\n\r\n    # Determines and gets the default parameters regarding a specific action\r\n    _getDefaultParameters: (action) ->\r\n        switch action\r\n            when 'account.mailbox.messages'\r\n                defaultAccount = AccountStore.getDefault()\r\n                defaultMailbox = defaultAccount?.get('mailboxes').first()\r\n                defaultParameters =\r\n                    accountID: defaultAccount?.get 'id'\r\n                    mailboxID: defaultMailbox?.get 'id'\r\n                    page: 1\r\n            when 'account.config'\r\n                defaultAccount = AccountStore.getDefault()?.get 'id'\r\n                defaultParameters = accountID: defaultAccount\r\n            when 'search'\r\n                defaultParameters =\r\n                    query: \"\"\r\n                    page: 1\r\n            else\r\n                defaultParameters = null\r\n        return defaultParameters\r\n","Store = require '../libs/flux/store/store'\r\n\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nAccountTranslator = require '../utils/translators/account_translator'\r\n\r\nclass AccountStore extends Store\r\n\r\n    ###\r\n        Initialization.\r\n        Defines private variables here.\r\n    ###\r\n\r\n    # Creates an OrderedMap of accounts\r\n    _accounts = Immutable.Sequence window.accounts\r\n\r\n        # sort first\r\n        .sort (mb1, mb2) ->\r\n            if mb1.label > mb2.label then return 1\r\n            else if mb1.label < mb2.label then return -1\r\n            else return 0\r\n\r\n        # sets account ID as index\r\n        .mapKeys (_, account) -> return account.id\r\n\r\n        # makes account object an immutable Map\r\n        .map (account) -> AccountTranslator.toImmutable account\r\n\r\n        .toOrderedMap()\r\n\r\n    _selectedAccount = null\r\n    _newAccountWaiting = false\r\n    _newAccountError = null\r\n\r\n\r\n    ###\r\n        Defines here the action handlers.\r\n    ###\r\n    __bindHandlers: (handle) ->\r\n\r\n        handle ActionTypes.ADD_ACCOUNT, (account) ->\r\n            account = AccountTranslator.toImmutable account\r\n            _accounts = _accounts.set account.get('id'), account\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.SELECT_ACCOUNT, (accountID) ->\r\n            _selectedAccount = _accounts.get(accountID) or null\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.NEW_ACCOUNT_WAITING, (payload) ->\r\n            _newAccountWaiting = payload\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.NEW_ACCOUNT_ERROR, (error) ->\r\n            _newAccountError = error\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.EDIT_ACCOUNT, (rawAccount) ->\r\n            account = AccountTranslator.toImmutable rawAccount\r\n            _accounts = _accounts.set account.get('id'), account\r\n            _selectedAccount = _accounts.get account.get 'id'\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.REMOVE_ACCOUNT, (accountID) ->\r\n            _accounts = _accounts.delete accountID\r\n            _selectedAccount = @getDefault()\r\n            @emit 'change'\r\n\r\n    ###\r\n        Public API\r\n    ###\r\n    getAll: -> return _accounts\r\n\r\n    getByID: (accountID) -> return _accounts.get accountID\r\n\r\n    getDefault: -> return _accounts.first() or null\r\n\r\n    getDefaultMailbox: (accountID) ->\r\n\r\n        account = _accounts.get(accountID) or @getDefault()\r\n        mailboxes = account.get('mailboxes')\r\n        defaultID = account.get('favorites')[0]\r\n\r\n        return if defaultID then mailboxes.get defaultID\r\n        else mailboxes.first()\r\n\r\n    getSelected: -> return _selectedAccount\r\n\r\n    getSelectedMailboxes: (flatten = false) ->\r\n\r\n        return Immutable.OrderedMap.empty() unless _selectedAccount?\r\n\r\n        if flatten\r\n            rawMailboxesTree = _selectedAccount.get('mailboxes').toJS()\r\n            # @FIXME Should be done with iterator when they are fixed\r\n            getFlattenMailboxes = (childrenMailboxes, depth = 0) ->\r\n                result = Immutable.OrderedMap()\r\n                for id, rawMailbox of childrenMailboxes\r\n                    children = rawMailbox.children\r\n                    delete rawMailbox.children\r\n                    mailbox = Immutable.Map rawMailbox\r\n                    # we add a depth indicator for display\r\n                    mailbox = mailbox.set 'depth', depth\r\n                    result = result.set mailbox.get('id'), mailbox\r\n                    result = result.merge getFlattenMailboxes children, \\\r\n                                                                    (depth + 1)\r\n                return result.toOrderedMap()\r\n\r\n            return getFlattenMailboxes(rawMailboxesTree).toOrderedMap()\r\n        else\r\n            emptyMap = Immutable.OrderedMap.empty()\r\n            return _selectedAccount?.get('mailboxes') or emptyMap\r\n\r\n    getSelectedMailbox: (selectedID) ->\r\n        mailboxes = @getSelectedMailboxes()\r\n        if selectedID?\r\n            return mailboxes.get selectedID\r\n        else\r\n            return mailboxes.first()\r\n\r\n    # Takes the 3 first mailboxes to show as \"favorite\".\r\n    # Skip the first 1, assumed to be the inbox\r\n    # Should be made configurable.\r\n    getSelectedFavorites: ->\r\n\r\n\r\n        mailboxes = @getSelectedMailboxes true\r\n        ids = _selectedAccount?.get 'favorites'\r\n        \r\n        return mailboxes\r\n            .filter (box, key) -> key in ids[1..]\r\n            .toOrderedMap()\r\n\r\n    getError: -> return _newAccountError\r\n\r\n    isWaiting: -> return _newAccountWaiting\r\n\r\nmodule.exports = new AccountStore()\r\n","Store = require '../libs/flux/store/store'\r\n\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nclass LayoutStore extends Store\r\n\r\n    ###\r\n        Initialization.\r\n        Defines private variables here.\r\n    ###\r\n    _responsiveMenuShown = false\r\n    _alert =\r\n        level: null\r\n        message: null\r\n\r\n\r\n    ###\r\n        Defines here the action handlers.\r\n    ###\r\n    __bindHandlers: (handle) ->\r\n\r\n        handle ActionTypes.SHOW_MENU_RESPONSIVE, ->\r\n            _responsiveMenuShown = true\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.HIDE_MENU_RESPONSIVE, ->\r\n            _responsiveMenuShown = false\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.DISPLAY_ALERT, (value) ->\r\n            _alert.level   = value.level\r\n            _alert.message = value.message\r\n            @emit 'change'\r\n\r\n\r\n    ###\r\n        Public API\r\n    ###\r\n    isMenuShown: -> return _responsiveMenuShown\r\n\r\n    getAlert: -> return _alert\r\n\r\nmodule.exports = new LayoutStore()\r\n","Store = require '../libs/flux/store/store'\r\nAppDispatcher = require '../app_dispatcher'\r\n\r\nAccountStore = require './account_store'\r\n\r\n{ActionTypes}       = require '../constants/app_constants'\r\n\r\nLayoutActionCreator = require '../actions/layout_action_creator'\r\n\r\nclass MessageStore extends Store\r\n\r\n    ###\r\n        Initialization.\r\n        Defines private variables here.\r\n    ###\r\n\r\n    # Creates an OrderedMap of messages\r\n    _messages = Immutable.Sequence()\r\n\r\n        # sets message ID as index\r\n        .mapKeys (_, message) -> message.id\r\n\r\n        # makes message object an immutable Map\r\n        .map (message) -> Immutable.fromJS message\r\n        .toOrderedMap()\r\n\r\n    _counts = Immutable.Map()\r\n    _unreadCounts = Immutable.Map()\r\n\r\n\r\n    ###\r\n        Defines here the action handlers.\r\n    ###\r\n    __bindHandlers: (handle) ->\r\n\r\n        handle ActionTypes.RECEIVE_RAW_MESSAGE, onReceiveRawMessage = \\\r\n        (message, silent = false) ->\r\n            # create or update\r\n            message.hasAttachments = Array.isArray(message.attachments) and \\\r\n                                     message.attachments.length > 0\r\n            if not message.createdAt?\r\n                message.createdAt = message.date\r\n            if not message.attachments?\r\n                message.attachments = []\r\n            # Add messageId to every attachment\r\n            message.attachments = message.attachments.map (file) ->\r\n                file.messageId = message.id\r\n                return file\r\n\r\n            if not message.flags?\r\n                message.flags = []\r\n            message = Immutable.Map message\r\n            message.getReplyToAddress = ->\r\n                reply = this.get 'replyTo'\r\n                from = this.get 'from'\r\n                reply = if not reply? or reply.length is 0 then from else reply\r\n                return reply\r\n            _messages = _messages.set message.get('id'), message\r\n\r\n            @emit 'change' unless silent\r\n\r\n        handle ActionTypes.RECEIVE_RAW_MESSAGES, (messages) ->\r\n\r\n            if messages.count? and messages.mailboxID?\r\n                _counts = _counts.set messages.mailboxID, messages.count\r\n                _unreadCounts = _unreadCounts.set messages.mailboxID, messages.unread\r\n                messages = messages.messages\r\n\r\n            onReceiveRawMessage message, true for message in messages\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.REMOVE_ACCOUNT, (accountID) ->\r\n            AppDispatcher.waitFor [AccountStore.dispatchToken]\r\n            messages = @getMessagesByAccount accountID\r\n            _messages = _messages.withMutations (map) ->\r\n                messages.forEach (message) -> map.remove message.get 'id'\r\n\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.MESSAGE_SEND, (message) ->\r\n            # message should have been copied to Sent mailbox,\r\n            # so it seems reasonable to emit change\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.MESSAGE_DELETE, (message) ->\r\n            # message should have been deleted from current mailbox\r\n            # and copied to trash\r\n            # so it seems reasonable to emit change\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.MESSAGE_BOXES, (message) ->\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.MESSAGE_FLAG, (message) ->\r\n            @emit 'change'\r\n\r\n\r\n    ###\r\n        Public API\r\n    ###\r\n    getAll: -> return _messages\r\n\r\n    getByID: (messageID) -> _messages.get(messageID) or null\r\n\r\n    ###*\r\n    * Get messages from account, with optional pagination\r\n    *\r\n    * @param {String} accountID\r\n    * @param {Number} first     index of first message\r\n    * @param {Number} last      index of last message\r\n    *\r\n    * @return {Array}\r\n    ###\r\n    getMessagesByAccount: (accountID, first = null, last = null) ->\r\n        sequence = _messages.filter (message) ->\r\n            return message.get('account') is accountID\r\n        if first? and last?\r\n            sequence = sequence.slice first, last\r\n\r\n        # sequences are lazy so we need .toOrderedMap() to actually execute it\r\n        return sequence.toOrderedMap()\r\n\r\n\r\n    getMessagesCountByAccount: (accountID) ->\r\n        return @getMessagesByAccount(accountID).count()\r\n\r\n    ###*\r\n    * Get messages from mailbox, with optional pagination\r\n    *\r\n    * @param {String} mailboxID\r\n    * @param {Number} first     index of first message\r\n    * @param {Number} last      index of last message\r\n    *\r\n    * @return {Array}\r\n    ###\r\n    getMessagesByMailbox: (mailboxID, first = null, last = null) ->\r\n        sequence = _messages.filter (message) ->\r\n            return mailboxID in Object.keys message.get 'mailboxIDs'\r\n\r\n        if first? and last?\r\n            sequence = sequence.slice first, last\r\n\r\n        # sequences are lazy so we need .toOrderedMap() to actually execute it\r\n        return sequence.toOrderedMap()\r\n\r\n    getMessagesCounts: ->\r\n        return _counts\r\n\r\n    getUnreadMessagesCounts:  ->\r\n        return _unreadCounts\r\n\r\n    getMessagesByConversation: (messageID) ->\r\n        idsToLook = [messageID]\r\n        conversation = []\r\n        while idToLook = idsToLook.pop()\r\n            conversation.push @getByID idToLook\r\n            temp = _messages.filter (message) ->\r\n                return message.get('inReplyTo') is idToLook\r\n            newIdsToLook = temp.map((item) -> item.get('id')).toArray()\r\n            idsToLook = idsToLook.concat newIdsToLook\r\n\r\n        return conversation\r\n\r\nmodule.exports = new MessageStore()\r\n","Store = require '../libs/flux/store/store'\r\n\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nclass SearchStore extends Store\r\n\r\n    ###\r\n        Initialization.\r\n        Defines private variables here.\r\n    ###\r\n\r\n    _query = \"\"\r\n\r\n    # search results are a list of message\r\n    _results = Immutable.OrderedMap.empty()\r\n\r\n    ###\r\n        Defines here the action handlers.\r\n    ###\r\n    __bindHandlers: (handle) ->\r\n\r\n        handle ActionTypes.RECEIVE_RAW_SEARCH_RESULTS, (rawResults) ->\r\n            if rawResult?\r\n                _results = _results.withMutations (map) ->\r\n                    rawResults.forEach (rawResult) ->\r\n                        message = Immutable.Map rawResult\r\n                        map.set message.get('id'), message\r\n            else\r\n                _results = Immutable.OrderedMap.empty()\r\n\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.CLEAR_SEARCH_RESULTS, ->\r\n            _results = Immutable.OrderedMap.empty()\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.SET_SEARCH_QUERY, (query) ->\r\n            _query = query\r\n            @emit 'change'\r\n\r\n\r\n    ###\r\n        Public API\r\n    ###\r\n    getResults: -> return _results\r\n\r\n    getQuery: -> return _query\r\n\r\nmodule.exports = new SearchStore()\r\n","Store = require '../libs/flux/store/store'\r\n\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nclass SettingsStore extends Store\r\n\r\n    ###\r\n        Initialization.\r\n        Defines private variables here.\r\n    ###\r\n    _settings = Immutable.Map\r\n        messagesPerPage: 5\r\n        displayConversation: false\r\n        composeInHTML: true\r\n        messageDisplayHTML: true\r\n        messageDisplayImages: false\r\n\r\n    ###\r\n        Defines here the action handlers.\r\n    ###\r\n    __bindHandlers: (handle) ->\r\n\r\n        handle ActionTypes.SETTINGS_UPDATED, (settings) ->\r\n            _settings = Immutable.Map settings\r\n            @emit 'change'\r\n\r\n\r\n    ###\r\n        Public API\r\n    ###\r\n    get: (settingName = null) ->\r\n        if settingName?\r\n            return _settings.get settingName\r\n        else\r\n            return _settings\r\n\r\nmodule.exports = new SettingsStore()\r\n","Store = require '../libs/flux/store/store'\r\n\r\n{ActionTypes} = require '../constants/app_constants'\r\n\r\nclass TasksStore extends Store\r\n\r\n    ###\r\n        Initialization.\r\n        Defines private variables here.\r\n    ###\r\n    _tasks = Immutable.Sequence window.tasks\r\n    # sets task ID as index\r\n    .mapKeys (_, task) -> return task.id\r\n    .map (message) -> Immutable.fromJS message\r\n    .toOrderedMap()\r\n\r\n    \r\n    ###\r\n        Defines here the action handlers.\r\n    ###\r\n    __bindHandlers: (handle) ->\r\n\r\n        handle ActionTypes.RECEIVE_TASK_UPDATE, (task) ->\r\n            task = Immutable.Map task\r\n            _tasks = _tasks.set task.get('id'), task\r\n            @emit 'change'\r\n\r\n        handle ActionTypes.RECEIVE_TASK_DELETE, (taskid) ->\r\n            _tasks = _tasks.remove taskid\r\n            @emit 'change'\r\n\r\n\r\n    getTasks: -> _tasks.toOrderedMap() \r\n\r\n\r\nmodule.exports = new TasksStore()\r\n","module.exports =\r\n\r\n    displayAddresses: (addresses, full = false) ->\r\n        if not addresses?\r\n            return \"\"\r\n\r\n        res = []\r\n        for item in addresses\r\n            if not item?\r\n                break\r\n            if full\r\n                if item.name? and item.name isnt \"\"\r\n                    res.push \"\\\"#{item.name}\\\" <#{item.address}>\"\r\n                else\r\n                    res.push \"#{item.address}\"\r\n            else\r\n                if item.name? and item.name isnt \"\"\r\n                    res.push item.name\r\n                else\r\n                    res.push item.address.split('@')[0]\r\n        return res.join \", \"\r\n\r\n    generateReplyText: (text) ->\r\n        text = text.split '\\n'\r\n        res  = []\r\n        text.forEach (line) ->\r\n            res.push \"> #{line}\"\r\n        return res.join \"\\n\"\r\n\r\n    getAttachmentType: (type) ->\r\n        sub = type.split '/'\r\n        switch sub[0]\r\n            when 'audio', 'image', 'text', 'video'\r\n                return sub[0]\r\n            when \"application\"\r\n                switch sub[1]\r\n                    when \"vnd.ms-excel\",\\\r\n                         \"vnd.oasis.opendocument.spreadsheet\",\\\r\n                         \"vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\r\n                        return \"spreadsheet\"\r\n                    when \"msword\",\\\r\n                         \"vnd.ms-word\",\\\r\n                         \"vnd.oasis.opendocument.text\",\\\r\n                         \"vnd.openxmlformats-officedocument.wordprocessingm\" + \\\r\n                         \"l.document\"\r\n                        return \"word\"\r\n                    when \"vns.ms-powerpoint\",\\\r\n                         \"vnd.oasis.opendocument.presentation\",\\\r\n                         \"vnd.openxmlformats-officedocument.presentationml.\" + \\\r\n                         \"presentation\"\r\n                        return \"presentation\"\r\n\r\n                    when \"pdf\" then return sub[1]\r\n                    when \"gzip\", \"zip\" then return 'archive'\r\n\r\n    # convert attachment to the format needed by the file picker\r\n    convertAttachments: (file) ->\r\n        name = file.generatedFileName\r\n        return {\r\n            name:               name\r\n            size:               file.length\r\n            type:               file.contentType\r\n            originalName:       file.fileName\r\n            contentDisposition: file.contentDisposition\r\n            contentId:          file.contentId\r\n            transferEncoding:   file.transferEncoding\r\n            url: \"/message/#{file.messageId}/attachments/#{name}\"\r\n        }\r\n\r\n    formatDate: (date) ->\r\n        if not date?\r\n            return\r\n        today = moment()\r\n        date  = moment date\r\n        if date.isBefore today, 'year'\r\n            formatter = 'DD/MM/YYYY'\r\n        else if date.isBefore today, 'day'\r\n            formatter = 'DD MMMM'\r\n        else\r\n            formatter = 'hh:mm'\r\n        return date.format formatter\r\n","module.exports =\r\n\r\n    init: ->\r\n        if not window.plugins?\r\n            window.plugins = {}\r\n\r\n        for own pluginName, pluginConf of window.plugins\r\n            if pluginConf.active\r\n                @activate pluginName\r\n\r\n        if MutationObserver?\r\n\r\n            config =\r\n                attributes: false\r\n                childList: true\r\n                characterData: false\r\n                subtree: true\r\n\r\n            onMutation = (mutations) ->\r\n                checkNode = (node, action) ->\r\n                    if node.nodeType isnt Node.ELEMENT_NODE\r\n                        return\r\n\r\n                    for own pluginName, pluginConf of window.plugins\r\n                        if pluginConf.active\r\n                            listener = pluginConf.onAdd if action is 'add'\r\n                            listener = pluginConf.onDelete if action is 'delete'\r\n                            if listener? and\r\n                            listener.condition.bind(pluginConf)(node)\r\n                                listener.action.bind(pluginConf)(node)\r\n\r\n                check = (mutation) ->\r\n\r\n                    nodes = Array.prototype.slice.call mutation.addedNodes\r\n                    checkNode node, 'add' for node in nodes\r\n\r\n                    nodes = Array.prototype.slice.call mutation.removedNodes\r\n                    checkNode node, 'del' for node in nodes\r\n\r\n                check mutation for mutation in mutations\r\n\r\n            # Observes DOM mutation to see if a plugin should be called\r\n            observer = new MutationObserver onMutation\r\n            observer.observe document, config\r\n\r\n        else\r\n            # Dirty fallback for IE\r\n            # @TODO use polyfill ???\r\n            setInterval ->\r\n                for own pluginName, pluginConf of window.plugins\r\n                    if pluginConf.active\r\n                        if pluginConf.onAdd?\r\n                            if pluginConf.onAdd.condition document.body\r\n                                pluginConf.onAdd.action document.body\r\n\r\n            , 200\r\n\r\n    activate: (key) ->\r\n        plugin = window.plugins[key]\r\n        type   = plugin.type\r\n        plugin.active = true\r\n\r\n        # Add custom events listeners\r\n        if plugin.listeners?\r\n            for own event, listener of plugin.listeners\r\n                window.addEventListener event, listener.bind(plugin)\r\n\r\n        if plugin.onActivate\r\n            plugin.onActivate()\r\n\r\n        if type?\r\n            for own pluginName, pluginConf of window.plugins\r\n                if pluginName is key\r\n                    continue\r\n                if pluginConf.type is type and pluginConf.active\r\n                    @deactivate pluginName\r\n\r\n    deactivate: (key) ->\r\n        plugin = window.plugins[key]\r\n        plugin.active = false\r\n\r\n        # remove custom events listeners\r\n        if plugin.listeners?\r\n            for own event, listener of plugin.listeners\r\n                window.removeEventListener event, listener\r\n\r\n        if plugin.onDeactivate\r\n            plugin.onDeactivate()\r\n\r\n\r\n","TaskStore = require '../stores/tasks_store'\r\nAppDispatcher = require '../app_dispatcher'\r\n{ActionTypes} = require '../constants/app_constants'\r\nurl = window.location.origin\r\npathToSocketIO = \"#{window.location.pathname.substring(1)}socket.io\"\r\nsocket = io.connect url, resource: pathToSocketIO\r\n\r\ndispatchTaskUpdate = (task) ->\r\n\tAppDispatcher.handleServerAction\r\n\t    type: ActionTypes.RECEIVE_TASK_UPDATE\r\n\t    value: task\r\n\r\ndispatchTaskDelete = (taskid) ->\r\n\tAppDispatcher.handleServerAction\r\n\t\ttype: ActionTypes.RECEIVE_TASK_DELETE\r\n\t\tvalue: taskid\r\n\r\nsocket.on 'task.create', dispatchTaskUpdate\r\nsocket.on 'task.update', dispatchTaskUpdate\r\nsocket.on 'task.delete', dispatchTaskDelete\r\n\r\nmodule.exports = \r\n\r\n\tacknowledgeTask: (taskid) ->\r\n\t\tconsole.log taskid\r\n\t\tsocket.emit 'mark_ack', taskid","module.exports =\r\n\r\n    # Creates an immutable account from a raw account object\r\n    toImmutable: (rawAccount) ->\r\n\r\n        # Recursively creates Immutable OrderedMap of mailboxes\r\n        _createImmutableMailboxes = (children) ->\r\n            Immutable.Sequence children\r\n                .mapKeys (_, mailbox) -> mailbox.id\r\n                .map (mailbox) ->\r\n                    children = mailbox.children\r\n                    mailbox.children = _createImmutableMailboxes children\r\n                    return Immutable.Map mailbox\r\n                .toOrderedMap()\r\n\r\n        rawAccount.mailboxes = _createImmutableMailboxes rawAccount.mailboxes\r\n        return Immutable.Map rawAccount\r\n\r\n\r\n    toRawObject: toRawObject = (account) ->\r\n\r\n        _createRawObjectMailboxes = (children) ->\r\n            children?.map (child) ->\r\n                children = child.get 'children'\r\n                return child.set 'children', _createRawObjectMailboxes children\r\n            .toVector()\r\n\r\n        mailboxes = account.get 'mailboxes'\r\n        account = account.set 'mailboxes', _createRawObjectMailboxes mailboxes\r\n\r\n        return account.toJS()","request = superagent\r\n\r\nAccountTranslator = require './translators/account_translator'\r\n\r\nSettingsStore = require '../stores/settings_store'\r\n\r\nmodule.exports =\r\n\r\n    fetchConversation: (emailID, callback) ->\r\n        request.get \"message/#{emailID}\"\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback \"Something went wrong -- #{res.body}\"\r\n\r\n\r\n    fetchMessagesByFolder: (mailboxID, numPage, callback) ->\r\n        numByPage = SettingsStore.get 'messagesPerPage'\r\n        request.get \"mailbox/#{mailboxID}/page/#{numPage}/limit/#{numByPage}\"\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback \"Something went wrong -- #{res.body}\"\r\n\r\n    messageSend: (message, callback) ->\r\n        request.post \"/message\"\r\n        .send message\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback \"Something went wrong -- #{res.body}\"\r\n\r\n    messageDelete: (messageId, callback) ->\r\n        request.del \"/message/#{messageId}\"\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback \"Something went wrong -- #{res.body}\"\r\n\r\n    messagePatch: (messageId, patch, callback) ->\r\n        request.patch \"/message/#{messageId}\", patch\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback \"Something went wrong -- #{res.body}\"\r\n\r\n    conversationDelete: (conversationId, callback) ->\r\n        request.del \"/conversation/#{conversationId}\"\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback \"Something went wrong -- #{res.body}\"\r\n\r\n    conversationPatch: (conversationId, patch, callback) ->\r\n        request.patch \"/conversation/#{conversationId}\", patch\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback \"Something went wrong -- #{res.body}\"\r\n\r\n    createAccount: (account, callback) ->\r\n\r\n        # TODO: validation & sanitization\r\n\r\n        request.post 'account'\r\n        .send account\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback res.body, null\r\n\r\n    editAccount: (account, callback) ->\r\n\r\n        # TODO: validation & sanitization\r\n        rawAccount = AccountTranslator.toRawObject account\r\n\r\n        request.put \"account/#{rawAccount.id}\"\r\n        .send rawAccount\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback res.body, null\r\n\r\n    removeAccount: (accountID) ->\r\n\r\n        request.del \"account/#{accountID}\"\r\n        .set 'Accept', 'application/json'\r\n        .end (res) -> # nothing\r\n\r\n    accountDiscover: (domain, callback) ->\r\n\r\n        request.get \"provider/#{domain}\"\r\n        .set 'Accept', 'application/json'\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback res.body, null\r\n\r\n    search: (query, numPage, callback) ->\r\n        encodedQuery = encodeURIComponent query\r\n        numByPage = SettingsStore.get 'messagesPerPage'\r\n        request.get \"search/#{encodedQuery}/page/#{numPage}/limit/#{numByPage}\"\r\n        .end (res) ->\r\n            if res.ok\r\n                callback null, res.body\r\n            else\r\n                callback res.body, null\r\n"]}